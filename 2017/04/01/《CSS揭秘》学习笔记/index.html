<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2">
<meta name="theme-color" content="#222">






  
  
    
      
    
    
      
    
  <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
  <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















  

<link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon.ico?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico?v=6.3.0">


  <link rel="mask-icon" href="/assets/favicon.ico?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.3.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  


<meta name="google-site-verification" content="dooW3YxuMBP2zaaGiMHAaUgITQQQFJb88vm4Iou99yc">
  <meta name="keywords" content="css">
<meta property="og:type" content="article">
<meta property="og:title" content="《CSS揭秘》学习笔记">
<meta property="og:url" content="https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/index.html">
<meta property="og:site_name" content="tc9011&#39;s">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149061893739262.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170301391892017-03-01_18-40-01.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170301577172017-03-01_18-58-59.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170301579902017-03-01_20-22-30.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170301394202017-03-01_22-25-01.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170302802142017-03-02_08-04-38.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170408149166467928593.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170304174092017-03-04_14-47-26.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170304896032017-03-04_21-21-11.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170409149167021345493.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170305808472017-03-05_13-41-28.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170306442652017-03-06_19-38-33.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170308540362017-03-08_21-33-33.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170308782712017-03-08_22-11-15.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170310148915936645085.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170310148915938190068.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170310148915943491222.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170311148924748098646.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170311148924749418584.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170323149027543475606.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170321149010784150345.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170324149035995238752.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170326149045846499392.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170326149046148716437.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170326149052890247896.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170326149053016694527.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149061544672626.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149062019924399.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149062161374219.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149062211440753.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170328149070517652749.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170329149079173853634.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170329149079166285017.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170329149080006711392.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170329149080091517546.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170330149083268351932.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170330149088384939951.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170330149088553547628.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149091931234149.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149095804136298.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149096383852151.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149096496011099.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149096620270366.gif">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170331149097177332247.png">
<meta property="og:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170410149183539583959.png">
<meta property="og:updated_time" content="2019-04-09T02:34:36.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《CSS揭秘》学习笔记">
<meta name="twitter:image" content="https://tc9011.com/assets/images/《CSS揭秘》学习笔记/20170327149061893739262.png">






  <link rel="canonical" href="https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>《CSS揭秘》学习笔记 | tc9011's</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tc9011's</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Notes</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-guestbook">
    <a href="/guestbook" rel="section">
      <i class="menu-item-icon fa fa-fw fa-book"></i> <br>留言</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-footroad">
    <a href="/footroad" rel="section">
      <i class="menu-item-icon fa fa-fw fa-map"></i> <br>足迹</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tc9011">
      <meta itemprop="description" content="释放精神的桎梏">
      <meta itemprop="image" content="/assets/20161109360612.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tc9011's">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">《CSS揭秘》学习笔记
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              

              
                
              

              <time title="创建时间：2017-04-01 17:21:26" itemprop="dateCreated datePublished" datetime="2017-04-01T17:21:26+08:00">2017-04-01</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术类/" itemprop="url" rel="index"><span itemprop="name">技术类</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/04/01/《CSS揭秘》学习笔记/" class="leancloud_visitors" data-flag-title="《CSS揭秘》学习笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/assets/images/《CSS揭秘》学习笔记/20170327149061893739262.png" alt="20170327149061893739262.png"></p>
<a id="more"></a>
<p id="div-border-left-yellow">这本书给我打开了css新的大门，看之前最好对css基础比较熟练，然后对css3的新特性有一定的了解。书中大部份代码都在<a href="https://github.com/tc9011/CSS-Secrets-Demo" rel="external nofollow noopener noreferrer" target="_blank">github</a>上，大部分手敲，有问题可以提交pr</p>

<h2 id="关于本书"><a href="#关于本书" class="headerlink" title="关于本书"></a>关于本书</h2><p><code>$$()</code>函数可以更容易地获取和遍历所有匹配特定CSS选择符的DOM元素：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$$</span>(<span class="params">selector,context</span>)</span>&#123;</span><br><span class="line">  context = context || <span class="built_in">document</span>;</span><br><span class="line">  <span class="keyword">var</span> elements = context.querySelectorAll(selector);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(elements);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应该把标准语法排在最后，这样可以通过层叠机制来确保标准语法能够最终生效。</p>
<p>可以使用<a href="https://modernizr.com/" rel="external nofollow noopener noreferrer" target="_blank">modernizr</a>来针对支持或者不支持某些特性的浏览器分别编写样式。</p>
<p>自定义特性检测函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testProperty</span>(<span class="params">property</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> root = <span class="built_in">document</span>.documentElement;</span><br><span class="line">  <span class="keyword">if</span> (property <span class="keyword">in</span> root.style)&#123;</span><br><span class="line">    root.classList.add(property.toLowerCase());</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  root.classList.add(<span class="string">'no-'</span> + property.toLowerCase());</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自定义检测某个具体值是否支持的函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testValue</span>(<span class="params">id,value,property</span>)(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> dummy = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span><br><span class="line">  dummy.style[property] = value;</span><br><span class="line">  <span class="keyword">if</span> (dummy.style[property])&#123;</span><br><span class="line">    root.classList.add(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  root.classList.add(<span class="string">'no-'</span> + id);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><h3 id="Web标准：是敌还是友"><a href="#Web标准：是敌还是友" class="headerlink" title="Web标准：是敌还是友"></a>Web标准：是敌还是友</h3><h4 id="冰与火之歌：浏览器前缀"><a href="#冰与火之歌：浏览器前缀" class="headerlink" title="冰与火之歌：浏览器前缀"></a>冰与火之歌：浏览器前缀</h4><p>常见浏览器前缀：Firefox的<code>-moz-</code>、IE的<code>-ms-</code>、Opera的<code>-o-</code>、Safari和Chrome的<code>-webkit-</code>。</p>
<p>自动添加浏览器前缀的工具：</p>
<ul>
<li><a href="http://css3please.com/" rel="external nofollow noopener noreferrer" target="_blank">css3,please</a>，允许把无前缀的css代码粘贴进去，它们会自动帮你把必要的前缀都加好。</li>
<li><a href="http://css3generator.com/" rel="external nofollow noopener noreferrer" target="_blank">css3generator</a>，可视化的css3代码生成器（我补充的）。</li>
<li><a href="https://css-tricks.com/autoprefixer/" rel="external nofollow noopener noreferrer" target="_blank">autoprefixer</a>，它是在本地完成编译的，类似于预处理器。</li>
<li><a href="http://leaverou.github.io/prefixfree/" rel="external nofollow noopener noreferrer" target="_blank">prefixfree</a>，会在浏览器中进行特性检测，来决定哪些前缀是需要的，几乎不需要更新。</li>
</ul>
<h3 id="CSS编码技巧"><a href="#CSS编码技巧" class="headerlink" title="CSS编码技巧"></a>CSS编码技巧</h3><h4 id="尽量减少代码重复"><a href="#尽量减少代码重复" class="headerlink" title="尽量减少代码重复"></a>尽量减少代码重复</h4><p>字号和行高之间有关系，如果都写成绝对值，改变字号的时候好需要计算行高。<strong>当某些值相互依赖时，应该把他们的相互关系用代码表达出来。</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">font-size</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">line-height</span>: 30<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">--------</span>升级<span class="selector-tag">-----------</span></span><br><span class="line"><span class="selector-tag">font-size</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.5</span>;</span><br><span class="line"><span class="selector-tag">--------</span>升级<span class="selector-tag">-----------</span></span><br><span class="line"><span class="selector-tag">font-size</span>: 125%;<span class="comment">/*假设父级字号是16px*/</span></span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.5</span>;</span><br></pre></td></tr></table></figure>
<p>把下面一些长度单位单位改成em，这样这些效果就可以根据字号进行缩放，em可能会导致复杂的运算，因为它只能跟父级元素建立联系，这种情况下可以使用rem，rem是指相对于根元素的字体大小的单位，简单的说它就是一个相对单位。</p>
<p>把半透明的黑色或者白色叠加在主色调上，即可产生主色调的亮色和暗色变体，只要覆盖<code>background-color</code>属性，就可以得到不同颜色版本的按钮。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">padding</span>: 6<span class="selector-tag">px</span> 16<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#446d88</span>;</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#58a</span> <span class="selector-tag">line-gradient</span>(<span class="selector-id">#77a0bb</span>,<span class="selector-id">#58a</span>);</span><br><span class="line"><span class="selector-tag">border-radius</span>: 4<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">box-shadow</span>: 0 1<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> <span class="selector-tag">gray</span>;</span><br><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">text-shadow</span>: 0 <span class="selector-tag">-1px</span> 1<span class="selector-tag">px</span> <span class="selector-id">#335166</span>;</span><br><span class="line"><span class="selector-tag">font-size</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">line-height</span>: 30<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">--------</span>升级<span class="selector-tag">-----------</span></span><br><span class="line"><span class="selector-tag">padding</span>: <span class="selector-class">.3em</span> <span class="selector-class">.8em</span>;</span><br><span class="line"><span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#446d88</span>;</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#58a</span> <span class="selector-tag">line-gradient</span>(<span class="selector-id">#77a0bb</span>,<span class="selector-id">#58a</span>);</span><br><span class="line"><span class="selector-tag">border-radius</span>: <span class="selector-class">.2em</span>;</span><br><span class="line"><span class="selector-tag">box-shadow</span>: 0 <span class="selector-class">.05em</span> <span class="selector-class">.25em</span> <span class="selector-tag">gray</span>;</span><br><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">text-shadow</span>: 0 <span class="selector-tag">-</span><span class="selector-class">.05em</span> <span class="selector-class">.05em</span> <span class="selector-id">#335166</span>;</span><br><span class="line"><span class="selector-tag">font-size</span>: 125%;</span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.5</span>;</span><br><span class="line"><span class="selector-tag">--------</span>升级<span class="selector-tag">-----------</span></span><br><span class="line"><span class="selector-tag">padding</span>: <span class="selector-class">.3em</span> <span class="selector-class">.8em</span>;</span><br><span class="line"><span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.1</span>);</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#58a</span> <span class="selector-tag">line-gradient</span>(<span class="selector-tag">hsla</span>(0,0%,100%,<span class="selector-class">.2</span>),<span class="selector-tag">transparent</span>);</span><br><span class="line"><span class="selector-tag">border-radius</span>: <span class="selector-class">.2em</span>;</span><br><span class="line"><span class="selector-tag">box-shadow</span>: 0 <span class="selector-class">.05em</span> <span class="selector-class">.25em</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.5</span>);</span><br><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">text-shadow</span>: 0 <span class="selector-tag">-</span><span class="selector-class">.05em</span> <span class="selector-class">.05em</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.5</span>);</span><br><span class="line"><span class="selector-tag">font-size</span>: 125%;</span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.cancel</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#c00</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.ok</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#6b0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="currentColor"><a href="#currentColor" class="headerlink" title="currentColor"></a>currentColor</h5><p><code>currentColor</code>是CSS有史以来的第一个变量。假设让所有水平分割线自动与文本颜色保持一致：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">hr</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: .<span class="number">5em</span>;</span><br><span class="line">  <span class="attribute">background</span>: currentColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h5><p><code>inherit</code>总是绑定到父元素的计算值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">button</span>&#123;<span class="attribute">font</span>: inherit;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="相信你的眼睛，而不是数字"><a href="#相信你的眼睛，而不是数字" class="headerlink" title="相信你的眼睛，而不是数字"></a>相信你的眼睛，而不是数字</h4><p>有时候精准的尺度看起来并不精准，这种视觉上的错觉在任何形式的视觉设计中都普遍存在，我们的设计要顺应这种偏差。</p>
<h4 id="关于响应式网页设计"><a href="#关于响应式网页设计" class="headerlink" title="关于响应式网页设计"></a>关于响应式网页设计</h4><p>每个媒体查询都会增加成本。</p>
<p>不妨在媒体查询中使用em单位，这能让文本缩放在必要时触发布局的变化。</p>
<p>使用百分比长度来取代固定长度。如果实在做不到这点，也应该尝试使用与视口相关的单位（vm、vh、vmin和vmax），它们的值解析为视口的宽度或者高度的百分比。</p>
<p>当需要在较大分辨率下得到固定宽度时，使用max-width而不是width，因为它可以适应较小分辨率，而无需使用媒体查询。</p>
<p>不要忘记为替换元素（比如img、object、video、iframe等）设置一个max-width，值为100%</p>
<p>假如背景图片需要完整的铺满一个容器，不管容器的尺寸如何变化，<code>background-size: cover</code>这个属性都可做到。但是带宽并不是无限的，因此在移动设备中通过css把大图缩小显示往往是不明智的。</p>
<p>当图片（或其他元素）以行列式进行布局时，让视口的宽度来决定列的数量。弹性盒布局（即flexbox）或者<code>display: inline-block</code>加上常规的文本折行行为，都可以实现这一点。</p>
<p>在使用多列文本时，指定column-width（列宽）而不是指定column-count（列数），这样它就可以在较小的屏幕上自动显示为单列布局。</p>
<p><strong>实现弹性可伸缩的布局，并在媒体查询的各个断点区间内指定相应的尺寸。</strong></p>
<h4 id="合理使用简写"><a href="#合理使用简写" class="headerlink" title="合理使用简写"></a>合理使用简写</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">rebeccapurole</span>;</span><br><span class="line"><span class="selector-tag">background-color</span>: <span class="selector-tag">rebeccapurole</span>;</span><br></pre></td></tr></table></figure>
<p>上面两行代码并不等价，前者是简写，它可以确保你得到rebeccapurole纯色背景；使用后者有可能背景颜色会受到<code>background-image</code>影响，从而背景最终显示为其他的图案。</p>
<h4 id="我应该使用预处理器吗"><a href="#我应该使用预处理器吗" class="headerlink" title="我应该使用预处理器吗"></a>我应该使用预处理器吗</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span>&#123; <span class="attribute">--accent-color</span>: purple;&#125;</span><br><span class="line"><span class="selector-tag">ol</span>&#123; <span class="attribute">--accent-color</span>: rebeccapurole;&#125;</span><br><span class="line"><span class="selector-tag">li</span>&#123; <span class="attribute">background</span>: <span class="built_in">var</span>(--accent-color);&#125;</span><br></pre></td></tr></table></figure>
<p>这段原生css代码使用变量玩法，在有序列表中，li的背景颜色是rebeccapurole；在无序列表中，li的背景颜色是purple。</p>
<h2 id="背景与边框"><a href="#背景与边框" class="headerlink" title="背景与边框"></a>背景与边框</h2><h3 id="半透明边框"><a href="#半透明边框" class="headerlink" title="半透明边框"></a>半透明边框</h3><blockquote>
<p>RGBA(R,G,B,A)，R：红色值，正整数 | 百分数；G：绿色值，正整数 | 百分数；B：蓝色值，正整数 | 百分数；A：Alpha透明度，取值0~1之间。此色彩模式与<a href="http://www.css88.com/book/css/values/color/rgb.htm" rel="external nofollow noopener noreferrer" target="_blank">RGB</a>相同，只是在<a href="http://www.css88.com/book/css/values/color/rgb.htm" rel="external nofollow noopener noreferrer" target="_blank">RGB</a>模式上新增了Alpha透明度。IE6.0-8.0不支持使用 rgba 模式实现透明度，可使用 IE 滤镜处理。</p>
</blockquote>
<blockquote>
<p>HSLA(H,S,L,A)，H：Hue(色调)，0(或360)表示红色，120表示绿色，240表示蓝色，也可取其他数值来指定颜色，取值为：0 - 360；S：Saturation(饱和度)，取值为：0.0% - 100.0%；L：Lightness(亮度)，取值为：0.0% - 100.0%；A：Alpha透明度，取值0~1之间。</p>
</blockquote>
<p>默认情况下，背景会延伸到边框所在的区域下层。</p>
<p>在背景与边框第三版中可以通过<code>background-clip</code>属性来调整上面的默认行为带来的不便。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">border</span>: 10<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">hsla</span>(0,0%,100%,0<span class="selector-class">.5</span>);</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">background-clip</span>: <span class="selector-tag">padding-box</span>;</span><br></pre></td></tr></table></figure>
<p><code>background-clip</code>属性初始值是<code>border-box</code>，意味着背景会被元素的<code>border box</code>（边框的外沿边框）剪裁掉。<code>padding-box</code>意味着浏览器会用内边距的外沿来把背景剪裁掉。</p>
<h3 id="多重边框"><a href="#多重边框" class="headerlink" title="多重边框"></a>多重边框</h3><h4 id="box-shadow方案"><a href="#box-shadow方案" class="headerlink" title="box-shadow方案"></a>box-shadow方案</h4><p><code>box-shadow</code>第四个参数（称作扩张半径）通过指定正值或者负值，可以让投影面积加大或者减小。</p>
<p>一个正值的扩张半径加上两个为零的偏移量以及为零的模糊值，得到的投影其实像一道实线边框：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">yellowgreen</span>;</span><br><span class="line"><span class="selector-tag">box-shadow</span>: 0 0 0 10<span class="selector-tag">px</span> <span class="selector-id">#655</span>,</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170301391892017-03-01_18-40-01.png" alt="20170301391892017-03-01_18-40-01.png"></p>
<p>用<code>box-shadow</code>的好处在于，它支持逗号分隔语法，可以用来创建任意数量的投影：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>: 0 0 0 10<span class="selector-tag">px</span> <span class="selector-id">#655</span>,</span><br><span class="line">   		    0 0 0 15<span class="selector-tag">px</span> <span class="selector-tag">deeppink</span>,</span><br><span class="line">            0 2<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 15<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.6</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170301577172017-03-01_18-58-59.png" alt="20170301577172017-03-01_18-58-59.png"></p>
<p>唯一需要注意的是，<code>box-shadow</code>是层层叠加的，第一层投影位于最顶层，假设为10px，如果外圈再加一道5px的外框，需要指定的扩张半径为：15px（10px+5px）。</p>
<p>需要注意的是：</p>
<ul>
<li>投影不会影响布局，而且不会受到<code>box-size</code>属性的影响。不过可以通过内边距或者外边距来额外模拟出边框所需要占据的空间。</li>
<li>投影的边框出现在元素的外圈，不会影响鼠标事件。</li>
</ul>
<h4 id="outline方案"><a href="#outline方案" class="headerlink" title="outline方案"></a>outline方案</h4><p>如果只需要两层边框，可以先设置一层常规边框，再设置一层outline属性来产生外层的边框。这种方法有点在于边框样式比较灵活，可以模拟虚线边框的效果，还可以通过<code>outline-offset</code>属性来控制它跟元素边缘之间的间距，这个属性可以接受负值。但是这个方案中outline产生的边框不会贴合圆角边框。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div1</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">25px</span> <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#655</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">5px</span> dashed deeppink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#div2</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">25px</span> <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid black;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">1px</span> dashed white;</span><br><span class="line">    <span class="attribute">outline-offset</span>: -<span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#div3</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">25px</span> <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#655</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">5px</span> solid deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170301579902017-03-01_20-22-30.png" alt="20170301579902017-03-01_20-22-30.png"></p>
<h3 id="灵活的背景定位"><a href="#灵活的背景定位" class="headerlink" title="灵活的背景定位"></a>灵活的背景定位</h3><h4 id="background-position的扩展语法方案"><a href="#background-position的扩展语法方案" class="headerlink" title="background-position的扩展语法方案"></a>background-position的扩展语法方案</h4><p>在<a href="http://w3.org/TR/css3-background" rel="external nofollow noopener noreferrer" target="_blank">CSS背景与边框（第三版）</a>中，<code>background-position</code>属性允许指定背景图片距离任意角的偏移量，只要在偏移量前面指定关键字。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background: url(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">   <span class="selector-tag">no-repeat</span> <span class="selector-id">#58a</span>;</span><br><span class="line"><span class="selector-tag">background-position</span>: <span class="selector-tag">right</span> 20<span class="selector-tag">px</span> <span class="selector-tag">bottom</span> 10<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>对不支持<code>background-position</code>扩展语法的浏览器中，回退方案是把<code>bottom right</code>写到<code>background</code>简写属性中：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background: url(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">   <span class="selector-tag">no-repeat</span> <span class="selector-tag">bottom</span> <span class="selector-tag">right</span> <span class="selector-id">#58a</span>;</span><br><span class="line"><span class="selector-tag">background-position</span>: <span class="selector-tag">right</span> 20<span class="selector-tag">px</span> <span class="selector-tag">bottom</span> 10<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<h4 id="background-origin方案"><a href="#background-origin方案" class="headerlink" title="background-origin方案"></a>background-origin方案</h4><p>当偏移量与容器内边距一致的时候，可以用<code>background-origin</code>，让偏移量自动跟着内边距走。</p>
<p>默认情况下，<code>background-position</code>的偏移量是以padding box为准，这样边框才不会遮住背景图片。在<a href="http://w3.org/TR/css3-background" rel="external nofollow noopener noreferrer" target="_blank">背景与边框（第三版）</a>中的<code>background-origin</code>属性可以改变这种行为，其默认值是<code>padding box</code>，改成<code>content-box</code>后<code>background-position</code>的偏移量以content-box为准。</p>
<h4 id="calc-方案"><a href="#calc-方案" class="headerlink" title="calc()方案"></a>calc()方案</h4><p id="div-border-left-red">请不要忘记在<code>calc()</code>函数内部的<code>-</code>和<code>+</code>运算符的两侧各加一个空白符，否则会产生解析错误。</p>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background: url(http://csssecrets.io/images/code-pirate.svg)</span><br><span class="line">  <span class="selector-tag">no-repeat</span> <span class="selector-tag">bottom</span> <span class="selector-tag">right</span> <span class="selector-id">#58a</span>;</span><br><span class="line"><span class="selector-tag">background-position</span>: <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 20<span class="selector-tag">px</span>) <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 10<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<h3 id="边框内圆角"><a href="#边框内圆角" class="headerlink" title="边框内圆角"></a>边框内圆角</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">outline</span>: <span class="selector-class">.6em</span> <span class="selector-tag">solid</span> <span class="selector-id">#655</span>;</span><br><span class="line"><span class="selector-tag">box-shadow</span>: 0 0 0 <span class="selector-class">.4em</span> <span class="selector-id">#655</span>; <span class="comment">/* todo calculate max of this */</span></span><br><span class="line"><span class="selector-tag">border-radius</span>: <span class="selector-class">.8em</span>;</span><br><span class="line"><span class="selector-tag">padding</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">tan</span>;</span><br></pre></td></tr></table></figure>
<p>描边并不会跟着元素的圆角走，但是<code>box-shadow</code>会，两者叠加到一起，<code>box-shadow</code>刚好填补描边和容器圆角之间的空隙，达到下图的效果。扩张值等于描边宽度可能会浏览器渲染异常，所以扩张半径取圆角半径的一半，并且描边的宽度要比圆角半径的一半要小。</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170301394202017-03-01_22-25-01.png" alt="20170301394202017-03-01_22-25-01.png"></p>
<h3 id="条纹背景"><a href="#条纹背景" class="headerlink" title="条纹背景"></a>条纹背景</h3><p id="div-border-left-green">如果多个色标具有相同的位置，它们会产生一个无限小的过度区域，过度的起止色分别是第一个和最后一个指定值。从效果上看，颜色会在那个位置突然变化，而不是一个平滑的渐变过程：<code>background: linear-gradient(#fb3 50%, #58a 50%);</code>。</p>

<p><img src="/assets/images/《CSS揭秘》学习笔记/20170302802142017-03-02_08-04-38.png" alt="20170302802142017-03-02_08-04-38.png"></p>
<p>关于<code>linear-gradient()</code>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/linear-gradient" rel="external nofollow noopener noreferrer" target="_blank">MDN</a>是这样说明的（颜色参数后面的长度参数是渐变的起始位置或者终止位置）：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170408149166467928593.png" alt="20170408149166467928593.png"></p>
<p>如果第二个色标的位置值设为0，那它的位置就总会被浏览器调整为前一个色标的位置值。<code>background: linear-gradient(#fb3 50%, #58a 0);</code></p>
<h4 id="垂直条纹"><a href="#垂直条纹" class="headerlink" title="垂直条纹"></a>垂直条纹</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-id">#fb3</span> 50%, <span class="selector-id">#58a</span> 0);</span><br><span class="line"><span class="comment">/*或者这样写*/</span></span><br><span class="line"><span class="comment">/*background: linear-gradient(90deg, #fb3 50%, #58a 0);*/</span></span><br><span class="line"><span class="selector-tag">background-size</span>: 30<span class="selector-tag">px</span> 100%;</span><br></pre></td></tr></table></figure>
<h4 id="斜向条纹"><a href="#斜向条纹" class="headerlink" title="斜向条纹"></a>斜向条纹</h4><p>单个贴片中包含四条条纹，才有可能无缝拼接成斜向条纹。</p>
<p>条纹宽度要和垂直条纹宽度一样时，条纹宽度需要通过勾股定理计算。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-id">#fb3</span> 25%, <span class="selector-id">#58a</span> 0, <span class="selector-id">#58a</span> 50%, <span class="selector-id">#fb3</span> 0, <span class="selector-id">#fb3</span> 75%, <span class="selector-id">#58a</span> 0);</span><br><span class="line"> <span class="selector-tag">background-size</span>: 42<span class="selector-tag">px</span> 42<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<h4 id="更好的斜向条纹"><a href="#更好的斜向条纹" class="headerlink" title="更好的斜向条纹"></a>更好的斜向条纹</h4><p>可以通过<code>linear-gradient()</code>（<code>radial-gradient()</code>）的循环加强版<code>repeating-linear-gradient()</code>（<code>repeating-radial-gradient()</code>）来实现斜向条纹，和前者相比，后者的色标是无限循环的。</p>
<p>使用<code>repeating-radial-gradient()</code>可以随意改变斜纹的角度，而且代码中的长度直接表示条纹自身宽度。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">repeating-linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-id">#fb3</span> 0, <span class="selector-id">#fb3</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0, <span class="selector-id">#58a</span> 30<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<h4 id="灵活的同色系条纹"><a href="#灵活的同色系条纹" class="headerlink" title="灵活的同色系条纹"></a>灵活的同色系条纹</h4><p>如果条纹图案属于同色系，只是在明暗方面有着轻微的差别，可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-tag">background</span>: <span class="selector-id">#58a</span>;</span><br><span class="line"> <span class="selector-tag">background-image</span>: <span class="selector-tag">repeating-linear-gradient</span>(30<span class="selector-tag">deg</span>, <span class="selector-tag">hsla</span>(0,0%,100%,<span class="selector-class">.1</span>) 0, <span class="selector-tag">hsla</span>(0,0%,100%,<span class="selector-class">.1</span>) 15<span class="selector-tag">px</span>, <span class="selector-tag">transparent</span> 0, <span class="selector-tag">transparent</span> 30<span class="selector-tag">px</span>);</span><br><span class="line"><span class="selector-tag">---------</span>等同于<span class="selector-tag">---------</span></span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">repeating-linear-gradient</span>(30<span class="selector-tag">deg</span>, <span class="selector-id">#79b</span> 0, <span class="selector-id">#79b</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0, <span class="selector-id">#58a</span> 30<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<p>这样写只需要修改一处就可以改变所有颜色，而且对不支持css渐变的浏览器来说起到了回退作用。</p>
<h3 id="复杂的背景图案"><a href="#复杂的背景图案" class="headerlink" title="复杂的背景图案"></a>复杂的背景图案</h3><h4 id="网格"><a href="#网格" class="headerlink" title="网格"></a>网格</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> 	<span class="selector-tag">background</span>: <span class="selector-tag">white</span>;</span><br><span class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-tag">rgba</span>(200,0,0,<span class="selector-class">.5</span>) 50%,  <span class="selector-tag">transparent</span> 0),<span class="selector-tag">linear-gradient</span>(<span class="selector-tag">rgba</span>(200,0,0,<span class="selector-class">.5</span>) 50%,  <span class="selector-tag">transparent</span> 0);</span><br><span class="line">    <span class="selector-tag">background-size</span>: 30<span class="selector-tag">px</span> 30<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">----------</span>改进版，可方便的改变网格尺寸、线宽、颜色<span class="selector-tag">----------</span></span><br><span class="line">  	<span class="selector-tag">background</span>: <span class="selector-id">#5588aa</span>;</span><br><span class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>( <span class="selector-tag">white</span> 1<span class="selector-tag">px</span>,  <span class="selector-tag">transparent</span> 0),<span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>,<span class="selector-tag">white</span> 1<span class="selector-tag">px</span>,  <span class="selector-tag">transparent</span> 0);</span><br><span class="line">    <span class="selector-tag">background-size</span>: 30<span class="selector-tag">px</span> 30<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<h4 id="波点"><a href="#波点" class="headerlink" title="波点"></a>波点</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#655</span>;</span><br><span class="line">   <span class="selector-tag">background-image</span>: <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">tan</span> 30%, <span class="selector-tag">transparent</span> 0),</span><br><span class="line">                     <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">tan</span> 30%, <span class="selector-tag">transparent</span> 0);</span><br><span class="line">   <span class="selector-tag">background-size</span>: 30<span class="selector-tag">px</span> 30<span class="selector-tag">px</span>;</span><br><span class="line">   <span class="selector-tag">background-position</span>: 0 0,15<span class="selector-tag">px</span> 15<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>为了达到波点的效果，第二层背景的偏移定位必须是贴片宽高的一半。为了方便维护，可以使用scss的mixin：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> polka(<span class="variable">$size</span>,<span class="variable">$dot</span>,<span class="variable">$base</span>,<span class="variable">$accent</span>)&#123;</span><br><span class="line">  	<span class="attribute">background</span>: <span class="variable">$base</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: radial-gradient(<span class="variable">$accent</span> <span class="variable">$dot</span>, transparent <span class="number">0</span>),</span><br><span class="line">                      radial-gradient(<span class="variable">$accent</span> <span class="variable">$dot</span>, transparent <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="variable">$size</span> <span class="variable">$size</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>,<span class="variable">$size</span>/<span class="number">2</span> <span class="variable">$size</span>/<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-green"><a href="http://bennettfeely.com/gradients/" rel="external nofollow noopener noreferrer" target="_blank">Bennett的图案库</a></p>

<h3 id="伪随机背景"><a href="#伪随机背景" class="headerlink" title="伪随机背景"></a>伪随机背景</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">hsl</span>(20,40%,90%);</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-id">#fb3</span> 10<span class="selector-tag">px</span>,  <span class="selector-tag">transparent</span> 0),</span><br><span class="line">                  <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-id">#ab4</span> 20<span class="selector-tag">px</span>,  <span class="selector-tag">transparent</span> 0),</span><br><span class="line">                  <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-id">#655</span> 20<span class="selector-tag">px</span>,  <span class="selector-tag">transparent</span> 0);</span><br><span class="line"> <span class="selector-tag">background-size</span>: 41<span class="selector-tag">px</span> 100%,61<span class="selector-tag">px</span> 100%,83<span class="selector-tag">px</span> 100%;</span><br><span class="line"> <span class="selector-tag">width</span>: 300<span class="selector-tag">px</span>;</span><br><span class="line"> <span class="selector-tag">height</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line"> <span class="selector-tag">margin</span>: 2<span class="selector-tag">em</span> 2<span class="selector-tag">em</span>;</span><br></pre></td></tr></table></figure>
<p>贴片尺寸是<code>background-size</code>的最小公倍数，也就是每隔<code>41px*61px*83px</code>后贴片会重复，所以<code>background-size</code>尽量选择质数，使得最小公倍数尽可能大，减小重复。</p>
<h3 id="连续的图像边框"><a href="#连续的图像边框" class="headerlink" title="连续的图像边框"></a>连续的图像边框</h3><p id="div-border-left-green"><code>border-image</code>工作原理是把图片分成9块，然后把他们应用到元素边框的边和角。<img src="/assets/images/《CSS揭秘》学习笔记/20170304174092017-03-04_14-47-26.png" alt="20170304174092017-03-04_14-47-26.png"></p>

<p>使用<code>border-image</code>生成边框，需要额外的html元素：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div3</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(http://csssecrets.io/images/stone-art.jpg);</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Styling &amp; enable resize */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">21em</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">resize</span>: both;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">100%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5em</span> <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div3</span> &gt; <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div3"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>i am a man<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>还可以在背景图片之上，再叠加一层纯白实色背景，这两层背景分别设置不同的<code>background-clip</code>值，并且<code>background-origin</code>设置为<code>border-box</code>，这样使得背景图片在<code>border-box</code>范围内平铺：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="selector-tag">padding</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line"><span class="selector-tag">border</span>: 1<span class="selector-tag">em</span> <span class="selector-tag">solid</span> <span class="selector-tag">transparent</span>;</span><br><span class="line">   <span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">white</span> , <span class="selector-tag">white</span>),</span><br><span class="line">               url(http://csssecrets.io/images/stone-art.jpg);</span><br><span class="line">   <span class="selector-tag">background-size</span>: <span class="selector-tag">cover</span>;</span><br><span class="line">   <span class="selector-tag">background-clip</span>: <span class="selector-tag">padding-box</span>,<span class="selector-tag">border-box</span>;</span><br><span class="line">   <span class="selector-tag">background-origin</span>: <span class="selector-tag">border-box</span></span><br></pre></td></tr></table></figure>
<p>这个技巧可以用来做蚂蚁行军框：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> div5 &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;<span class="attribute">background-position</span>: <span class="number">100%</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div5</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(white , white) padding-box,</span><br><span class="line">                 <span class="built_in">repeating-linear-gradient</span>(-45deg ,</span><br><span class="line">            black 0,black 25%,</span><br><span class="line">            white 0,white 50%)</span><br><span class="line">    <span class="number">0</span> / .<span class="number">6em</span> .<span class="number">6em</span>;</span><br><span class="line">    <span class="attribute">animation</span>: div5 <span class="number">12s</span> linear infinite;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Styling &amp; enable resize */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">21em</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">100%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5em</span> <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170304896032017-03-04_21-21-11.gif" alt="20170304896032017-03-04_21-21-11.gif"></p>
<p><code>border-image</code>配合渐变图案生成顶部边框被剪裁的效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">border-top</span> : <span class="selector-class">.2em</span> <span class="selector-tag">solid</span> <span class="selector-tag">transparent</span>; </span><br><span class="line"><span class="selector-tag">border-image</span> : 100% 0 0 <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-tag">currentColor</span> 4<span class="selector-tag">em</span>, 				   <span class="selector-tag">transparent</span> 0); </span><br><span class="line"><span class="selector-tag">padding-top</span> : 1<span class="selector-tag">em</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170409149167021345493.png" alt="20170409149167021345493.png"></p>
<h2 id="形状"><a href="#形状" class="headerlink" title="形状"></a>形状</h2><h3 id="自适应椭圆"><a href="#自适应椭圆" class="headerlink" title="自适应椭圆"></a>自适应椭圆</h3><p>给任何足够大的正方形元素设置一个足够大的<code>border-radius</code>就可以把它变成一个圆形。</p>
<p id="div-border-left-green">当任意两个相邻圆角的半径之和超过border box的尺寸时，用户代理必须按比例减小各个边框半径所使用的值，直到它们不会相互重叠为止。</p>

<p><code>border-radius</code>可以单独指定水平和垂直半径，只要用<code>/</code>分隔两个值即可。</p>
<p><code>border-radius</code>不仅可以接受长度值，还可以接受百分比。</p>
<p><code>border-radius: 50%;</code>可以实现自适应椭圆。</p>
<p><code>border-radius</code>是简写，对应的展开式属性为：<code>border-top-left-radius</code>、<code>border-top-right-radius</code>、<code>border-bottom-right-radius</code>、<code>border-bottom-left-radius</code>。可以向<code>border-radius</code>一次性提供空格分隔的多个值。如果传了4个值，这4个值分别从左上角开始以顺时针顺序应用到元素的各个拐角；如果传了3个值，意味着第四个值与第二个值相同；如果传了2个值，意味着第三个值与第一个相同。</p>
<p>可以为所有四角提供完全不同的水平半径和垂直半径：斜杠前指定1~4个值，斜杠后指定1~4个值：<code>border-radius: 10px/5px 20px;</code></p>
<p>自适应的半椭圆：<code>border-radius: 50%/100% 100% 0 0;</code></p>
<p>自适应四分之一椭圆：<code>border-radius: 100% 0 0 0;</code></p>
<h3 id="平行四边形"><a href="#平行四边形" class="headerlink" title="平行四边形"></a>平行四边形</h3><h4 id="嵌套元素方案"><a href="#嵌套元素方案" class="headerlink" title="嵌套元素方案"></a>嵌套元素方案</h4><p>用<code>skew()</code>变形属性对矩形进行斜向拉伸：<code>transform: skewX(-45deg);</code>。</p>
<p>直接用<code>skew()</code>拉伸内容也会拉伸，此时可以对内容再用一次反向<code>skew()</code>变形，缺点是需要额外的HTML元素包裹内容。</p>
<h4 id="伪元素方案"><a href="#伪元素方案" class="headerlink" title="伪元素方案"></a>伪元素方案</h4><p>另一种方法是把所有样式（背景、边框等）应用到伪元素上，然后再对伪元素进行变形，因为内容不包含在伪元素中，所以内容不会受到影响：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button2</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">200%</span>/<span class="number">1</span> sans-serif;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;	<span class="comment">/*用伪元素生成一个矩形*/</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*偏移量设置为0，以便让伪元素在水平和垂直方向上都被拉伸至宿主元素的尺寸*/</span></span><br><span class="line">  	<span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;<span class="comment">/*伪元素生成的方块位于内容之上，设置z-index后会推到宿主元素之后*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#5588aa</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">skew</span>(45deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当想变形一个元素而不想变形它的内容时都可以用到上面的代码。</p>
<h3 id="菱形图片"><a href="#菱形图片" class="headerlink" title="菱形图片"></a>菱形图片</h3><h4 id="基于变形的方案"><a href="#基于变形的方案" class="headerlink" title="基于变形的方案"></a>基于变形的方案</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(45deg);</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div1</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-45deg) <span class="built_in">scale</span>(1.42);</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>max-width: 100%</code>会被解析为容器的边长。要显示为菱形，图片的宽度要与容器的对角线相等。</p>
<p>通过<code>scale()</code>变形样式缩放图片时，是以它的中心点进行缩放的。通过<code>width</code>属性来放大图片时，只会以它的左上角为原点进行缩放。</p>
<h4 id="裁切路径方案"><a href="#裁切路径方案" class="headerlink" title="裁切路径方案"></a>裁切路径方案</h4><p><code>clip-path</code>属性可以把元素剪裁成任何形状。<code>polygon()</code>是多边形函数，可以用一系列坐标点来指定任意的多边形，使用百分比时会解析为元素自身的尺寸。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">clip-path</span>: <span class="selector-tag">polygon</span>(50% 0, 100% 50%, 50% 100%, 0 50%);</span><br></pre></td></tr></table></figure>
<p>只要使用同一种形状函数并且点的数量相同，<code>clip-path</code>属性可以参与动画：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img2</span>&#123;</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(50% 0, 100% 50%, 50% 100%, 0 50%);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">1s</span> clip-path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img2</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(0 0, 100% 0, 100% 100%, 0 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170305808472017-03-05_13-41-28.gif" alt="20170305808472017-03-05_13-41-28.gif"></p>
<h3 id="切角效果"><a href="#切角效果" class="headerlink" title="切角效果"></a>切角效果</h3><p><code>linear-gradient</code>可以接受一个角度作为方向，色标的位置信息也可以是绝对的长度值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#5588aa</span>;</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-tag">white</span> 15<span class="selector-tag">px</span>,<span class="selector-id">#5588aa</span> 0);</span><br></pre></td></tr></table></figure>
<p>四角切角效果需要把<code>background-repeat</code>关掉，防止四层渐变背景相互覆盖。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#5588aa</span>;</span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(135<span class="selector-tag">deg</span>, <span class="selector-tag">white</span> 15<span class="selector-tag">px</span>,<span class="selector-id">#5588aa</span> 0) <span class="selector-tag">top</span> <span class="selector-tag">left</span>,</span><br><span class="line">            <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">-135deg</span>, <span class="selector-tag">white</span> 15<span class="selector-tag">px</span>,<span class="selector-id">#5588aa</span> 0) <span class="selector-tag">top</span> <span class="selector-tag">right</span>,</span><br><span class="line">            <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">-45deg</span>, <span class="selector-tag">white</span> 15<span class="selector-tag">px</span>,<span class="selector-id">#5588aa</span> 0) <span class="selector-tag">bottom</span> <span class="selector-tag">right</span>,</span><br><span class="line">            <span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-tag">white</span> 15<span class="selector-tag">px</span>,<span class="selector-id">#5588aa</span> 0) <span class="selector-tag">bottom</span> <span class="selector-tag">left</span>;</span><br><span class="line"><span class="selector-tag">background-size</span>: 50% 50%;</span><br><span class="line"><span class="selector-tag">background-repeat</span>: <span class="selector-tag">no-repeat</span>;</span><br></pre></td></tr></table></figure>
<h4 id="弧形切角"><a href="#弧形切角" class="headerlink" title="弧形切角"></a>弧形切角</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">circle</span> <span class="selector-tag">at</span> <span class="selector-tag">top</span> <span class="selector-tag">left</span>, <span class="selector-tag">transparent</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0) <span class="selector-tag">top</span> <span class="selector-tag">left</span>,</span><br><span class="line">            <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">circle</span> <span class="selector-tag">at</span> <span class="selector-tag">top</span> <span class="selector-tag">right</span>, <span class="selector-tag">transparent</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0) <span class="selector-tag">top</span> <span class="selector-tag">right</span>,</span><br><span class="line">            <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">circle</span> <span class="selector-tag">at</span> <span class="selector-tag">bottom</span> <span class="selector-tag">right</span>, <span class="selector-tag">transparent</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0) <span class="selector-tag">bottom</span> <span class="selector-tag">right</span>,</span><br><span class="line">            <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">circle</span> <span class="selector-tag">at</span> <span class="selector-tag">bottom</span> <span class="selector-tag">left</span>, <span class="selector-tag">transparent</span> 15<span class="selector-tag">px</span>, <span class="selector-id">#58a</span> 0) <span class="selector-tag">bottom</span> <span class="selector-tag">left</span>;</span><br><span class="line"><span class="selector-tag">background-size</span>: 50% 50%;</span><br><span class="line"><span class="selector-tag">background-repeat</span>: <span class="selector-tag">no-repeat</span>;</span><br></pre></td></tr></table></figure>
<h4 id="内联SVG与border-image方案"><a href="#内联SVG与border-image方案" class="headerlink" title="内联SVG与border-image方案"></a>内联SVG与border-image方案</h4><p>SVG可以实现与尺寸完全无关的缩放，此处使用的切片尺寸是1，它所对应的是SVG文件的坐标系统，因此不需要单位。<code>background-clip</code>属性避免背景色蔓延到边框区域。</p>
<p><code>border-width</code>支持动画效果。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">border</span>: 21<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">transparent</span>;</span><br><span class="line">border-image: 1 url('data:image/svg+xml,\</span><br><span class="line">	                      &lt;svg xmlns="http://www.w3.org/2000/svg" width="3" height="3" fill="%2358a"&gt;\</span><br><span class="line">	                      &lt;polygon points="0,1 1,0 2,0 3,1 3,2 2,3 1,3 0,2" /&gt;\</span><br><span class="line">	                      &lt;/svg&gt;');</span><br><span class="line"> <span class="selector-tag">background</span>: <span class="selector-id">#58a</span>;</span><br><span class="line"> <span class="selector-tag">background-clip</span>: <span class="selector-tag">padding-box</span>;</span><br></pre></td></tr></table></figure>
<h4 id="裁切路径方案-1"><a href="#裁切路径方案-1" class="headerlink" title="裁切路径方案"></a>裁切路径方案</h4><p><code>clip-path</code>属性中可以同时使用百分比数值和绝对长度。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#58a</span>;</span><br><span class="line"><span class="selector-tag">clip-path</span>:</span><br><span class="line">        <span class="selector-tag">polygon</span>(20<span class="selector-tag">px</span> 0, <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 20<span class="selector-tag">px</span>) 0, 100% 20<span class="selector-tag">px</span>, 100% <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 20<span class="selector-tag">px</span>),</span><br><span class="line">        <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 20<span class="selector-tag">px</span>) 100%,</span><br><span class="line">        20<span class="selector-tag">px</span> 100%, 0 <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 20<span class="selector-tag">px</span>), 0 20<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<p>这个方法不仅可以对任意类型的背景进行裁剪，甚至对替换元素（比如图片）进行裁剪，而且还支持动画效果。</p>
<p>由于它只能对元素做统一的裁剪，当内边距不够宽时，这个方案会裁剪掉文本。渐变方案允许文字溢出并超出切角区域，而<code>border-image</code>方案则会起到普通边框的作用，令文字折行。</p>
<h3 id="梯形标签页"><a href="#梯形标签页" class="headerlink" title="梯形标签页"></a>梯形标签页</h3><p>对元素使用3d变形后，其内部的变形效应是不可逆的。</p>
<p>当没有设置<code>transform-origin</code>属性时，应用变形效果会让这个元素以它自身的中心线为轴进行空间上的旋转，因此元素投射到2D屏幕上的尺寸会发生变化。指定<code>transform-origin: bottom;</code>，当元素在3D空间中旋转时，可以把它的底边固定住。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5em</span> <span class="number">5em</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div1</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">left</span>: <span class="number">0</span>;<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#5588aa</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">perspective</span>(.5em) <span class="built_in">rotateX</span>(5deg) <span class="built_in">scaleY</span>(1.3);</span><br><span class="line">    <span class="attribute">transform-origin</span>: bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方法可以给梯形标签页添加背景、边框。圆角。投影等一系列样式，并且只需要把<code>transform-origin</code>改成<code>bottom left</code>或者<code>buttom right</code>就可以立刻得到左侧倾斜或者右侧倾斜的标签页。但是这个方法的斜边角度依赖于元素的宽度。</p>
<h3 id="简单的饼图"><a href="#简单的饼图" class="headerlink" title="简单的饼图"></a>简单的饼图</h3><h4 id="基于transform的解决方案"><a href="#基于transform的解决方案" class="headerlink" title="基于transform的解决方案"></a>基于transform的解决方案</h4><p>用伪元素覆盖上去，通过旋转决定露出多大扇形区。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pie</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">100%</span> <span class="number">100%</span> <span class="number">0</span> / <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: inherit;	<span class="comment">/*背景元素与宿主元素保持一致,比率超过50%时改成棕色*/</span></span><br><span class="line">    <span class="attribute">transform-origin</span>: left;	<span class="comment">/*伪元素圆形的圆形旋转，还可以写成transform-origin: 0 50%*/</span></span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> linear infinite, bg <span class="number">6s</span> step-end infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170306442652017-03-06_19-38-33.png" alt="20170306442652017-03-06_19-38-33.png"></p>
<p id="div-border-left-green">一个负的延时值是合法的。与0s的延时类似，它意味着动画会立即开始播放，但会自动前进到延时值的绝对值处，就好像动画在过去已经播放了指定的时间一样。因此实际效果就是动画跳过指定时间而从中间开始播放了。</p>

<p>可以用负的动画延时来直接跳至动画中的任意时间点，并且定格在那里，以此来实现按照比率来显示饼图。这里的动画永远处于暂停状态，指定的持续时间并不会产生任何副作用。</p>
<h4 id="SVG解决方案"><a href="#SVG解决方案" class="headerlink" title="SVG解决方案"></a>SVG解决方案</h4><p><code>stroke-dasharray: 20 10;</code>是为虚线描边而准备的，20是虚线线段长度，10是间隙长度。</p>
<p>SVG描边时总会把一半绘制在元素外部，另一半绘制在元素内部：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170308540362017-03-08_21-33-33.png" alt="20170308540362017-03-08_21-33-33.png"></p>
<h2 id="视觉效果"><a href="#视觉效果" class="headerlink" title="视觉效果"></a>视觉效果</h2><h3 id="单侧投影"><a href="#单侧投影" class="headerlink" title="单侧投影"></a>单侧投影</h3><h4 id="单侧投影-1"><a href="#单侧投影-1" class="headerlink" title="单侧投影"></a>单侧投影</h4><p>投影<code>box-shadow: 2px 3px 4px rgba(0,0,0,5);</code>的绘制过程：</p>
<ol>
<li>在该元素相同尺寸和位置绘制颜色为<code>rgba(0,0,0,5)</code>的矩形；</li>
<li>把它向右移2px，向下移3px；</li>
<li>使用高斯模糊算法进行4px的模糊处理，本质上表示在阴影边缘发生阴影色和纯透明色之间的颜色过度长度近似于模糊半径的两倍（在这里就是8px）；</li>
<li>模糊后的矩形与原始元素交集部分会被切除掉。</li>
</ol>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170308782712017-03-08_22-11-15.png" alt="20170308782712017-03-08_22-11-15.png"></p>
<p id="div-border-left-red"><strong>所以<code>box-shadow</code>中，没有任何投影绘制在元素的下层</strong>。</p>

<p><code>text-shadow</code>中，文字下层的投影不会被剪裁。</p>
<p>使用4px的模糊半径意味着投影的尺寸会比元素本身的尺寸大8px；因此投影的最外圈会从元素的四面向外显露出来。</p>
<p><code>box-shadow</code>还有第四个长度参数—扩张半径，这个参数会根据指定的值去扩大或者缩小投影尺寸。比如，一个-5px的扩张半径会把投影的宽度和高度各减少10px（每边5px）。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>: 0 5<span class="selector-tag">px</span> 4<span class="selector-tag">px</span> <span class="selector-tag">-4px</span> <span class="selector-tag">rgba</span>(0,0,0,5);</span><br></pre></td></tr></table></figure>
<h4 id="邻边投影"><a href="#邻边投影" class="headerlink" title="邻边投影"></a>邻边投影</h4><p>扩张半径设为模糊半径相反值的一半，并且偏移量的值需要大于或者等于模糊半径的一半，比如，把6px模糊半径的投影设置到右侧和底部：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>: 3<span class="selector-tag">px</span> 3<span class="selector-tag">px</span> 6<span class="selector-tag">px</span> <span class="selector-tag">-3px</span> <span class="selector-tag">rgba</span>(0,0,0,5);</span><br></pre></td></tr></table></figure>
<h4 id="双侧投影"><a href="#双侧投影" class="headerlink" title="双侧投影"></a>双侧投影</h4><p>设置两块投影（运用两次单侧投影）以实现双侧投影的效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>: 5<span class="selector-tag">px</span> 0 5<span class="selector-tag">px</span> <span class="selector-tag">-5px</span> <span class="selector-tag">rgba</span>(0,0,0,5),</span><br><span class="line">			<span class="selector-tag">-5px</span> 0 5<span class="selector-tag">px</span> <span class="selector-tag">-5px</span> <span class="selector-tag">rgba</span>(0,0,0,5);</span><br></pre></td></tr></table></figure>
<h3 id="不规则投影"><a href="#不规则投影" class="headerlink" title="不规则投影"></a>不规则投影</h3><p>使用<code>filter</code>滤镜属性，该属性只需要一些函数，就可以指定滤镜效果，比如<code>blur()</code>、<code>grayscale()</code>、<code>drop-shadow()</code>等。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">blur</span>() <span class="selector-tag">grayscale</span>() <span class="selector-tag">drop-shadow</span>();</span><br></pre></td></tr></table></figure>
<p><code>drop-shadow()</code>带有的参数和<code>box-shadow</code>属性一样，但是不包括扩张半径，不包括insert关键字，也不支持逗号分隔的多层投影语法：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">drop-shadow</span>(2<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.5</span>));</span><br></pre></td></tr></table></figure>
<p>任何非透明的部分都会被打上投影，如果文字被搭上投影，不能用<code>text-shadow: none</code>去除。</p>
<h3 id="染色效果"><a href="#染色效果" class="headerlink" title="染色效果"></a>染色效果</h3><h4 id="基于滤镜的方案"><a href="#基于滤镜的方案" class="headerlink" title="基于滤镜的方案"></a>基于滤镜的方案</h4><p><code>sepia()</code>滤镜会给图片增加一种降饱和度的橙黄色染色效果，几乎所有像素的色相值都会被收敛到35~40：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">sepia</span>();</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170310148915936645085.png" alt="20170310148915936645085.png"></p>
<p><code>saturate()</code>滤镜可以给每个像素提升饱和度；<code>hue-rotate()</code>滤镜把每个像素的相色以指定的度数进行偏移。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">sepia</span>(1) <span class="selector-tag">saturate</span>(4) <span class="selector-tag">hue-rotate</span>(295<span class="selector-tag">deg</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170310148915938190068.png" alt="20170310148915938190068.png"></p>
<h4 id="基于混合模式的方案"><a href="#基于混合模式的方案" class="headerlink" title="基于混合模式的方案"></a>基于混合模式的方案</h4><p><code>luminosity</code>混合模式会保留上层元素的HSL亮度信息，并从下层吸取色相的饱和度信息。</p>
<p><code>background-blend-mode: luminosity;</code>可以为每层背景单独指定混合模式，不用<code>&lt;img&gt;</code>元素，而是用<code>&lt;div&gt;</code>元素，把这个元素的第一层背景设置为要染色的图片，并把第二层颜色设置成想要的主色调；</p>
<p><code>mix-blend-mode: luminosity;</code>可以为整个元素设置混合模式，需要把图片包裹在一个容器中，并把容器的背景色设置成想要的主色调。</p>
<p>混合模式不可以加动画。把属性设置为<code>luminosity</code>混合模式，图片总会跟某些东西进行混合，如果要加上过度动画，可以通过修改背景颜色的方式实现，比如，可以把背景图片和一个透明背景混合，此时不会出现任何混合效果：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170310148915943491222.gif" alt="20170310148915943491222.gif"></p>
<h3 id="毛玻璃效果"><a href="#毛玻璃效果" class="headerlink" title="毛玻璃效果"></a>毛玻璃效果</h3><p><code>blur()</code>会使整个元素都会模糊。所以不能对元素本身进行模糊处理，这样文字也会变模糊。</p>
<p>可以对一个伪元素进行处理，然后将其定位到元素下层，它的背景将会无缝匹配<code>&lt;body&gt;</code>的背景。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">23em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">hsla</span>(0,0%,100%,.25) border-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="built_in">hsla</span>(0,0%,100%,.3) inset,</span><br><span class="line">    <span class="number">0</span> .<span class="number">5em</span> <span class="number">1em</span> <span class="built_in">rgba</span>(0, 0, 0, 0.6);</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">hsla</span>(0,0%,100%,.3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">30px</span>; <span class="comment">/*为了让边缘不出现逐渐消退的效果，需要让伪元素 相对其宿主元素的尺寸再向 外扩大 至少 20px （即它的模糊半径）。由于不同浏览器的模糊算法可能存在差异， 用一个更大的绝对值（比 如 -30px ）会更保险一些。*/</span></span><br><span class="line">  </span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;<span class="comment">/*把伪元素移动到宿主元素后面*/</span></span><br><span class="line">  </span><br><span class="line">    <span class="attribute">-webkit-filter</span>: <span class="built_in">blur</span>(20px);<span class="comment">/*设置伪元素模糊效果*/</span></span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(20px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>, <span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;	<span class="comment">/*第二张图是去掉body的效果*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"http://csssecrets.io/images/tiger.jpg"</span>) <span class="number">0</span> / cover fixed;	<span class="comment">/*把伪元素和body背景设置为相同的图片，因为main元素有overflow: hidden;所以超出main元素大小的部分会被剪裁掉*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170311148924748098646.png" alt="20170311148924748098646.png"></p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170311148924749418584.png" alt="20170311148924749418584.png"></p>
<h3 id="折角效果"><a href="#折角效果" class="headerlink" title="折角效果"></a>折角效果</h3><h4 id="45°折角的解决方案"><a href="#45°折角的解决方案" class="headerlink" title="45°折角的解决方案"></a>45°折角的解决方案</h4><p>切角效果的矩形和渐变生成的小三角形重合。要注意，第二层渐变中的<code>1.5em</code>是沿着渐变轴测量的，第一层渐变中<code>background-size</code>中的<code>2em</code>长度是背景贴片的宽度和高度。为了两者尺寸一致，需要把原来切角渐变的角标位置<code>2em</code>除以√2变成<code>1.5em</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#58a</span>; <span class="comment">/* Fallback */</span></span><br><span class="line"> <span class="selector-tag">background</span>:</span><br><span class="line">         linear-gradient(to left bottom, transparent 50%, rgba(0,0,0,.4) 0) no-repeat 100% 0 / 2em 2em,</span><br><span class="line">         <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">-135deg</span>, <span class="selector-tag">transparent</span> 1<span class="selector-class">.5em</span>, <span class="selector-id">#58a</span> 0);</span><br></pre></td></tr></table></figure>
<h4 id="其他角度的解决方案"><a href="#其他角度的解决方案" class="headerlink" title="其他角度的解决方案"></a>其他角度的解决方案</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div5</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#5588aa</span>;</span><br><span class="line">    <span class="attribute">background</span>:</span><br><span class="line">                <span class="built_in">linear-gradient</span>(-150deg,transparent 1.5em,#5588aa 0);</span><br><span class="line">    <span class="attribute">border-radius</span>: .<span class="number">5em</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12em</span>;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">100%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div5</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left bottom,transparent 50%,rgba(0,0,0,.2) <span class="number">0</span>,<span class="built_in">rgba</span>(0,0,0,.4)) <span class="number">100%</span> <span class="number">0</span> no-repeat;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1.73em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3em</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*移动并旋转伪元素与切角对齐*/</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-1.3em) <span class="built_in">rotate</span>(-30deg);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*让三角形的右下角成为旋转中心，方便计算便宜距离*/</span></span><br><span class="line">    <span class="attribute">transform-origin</span>: bottom right;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">border-bottom-left-radius</span>: inherit;</span><br><span class="line">    <span class="attribute">box-shadow</span>: -.<span class="number">2em</span> .<span class="number">2em</span> .<span class="number">3em</span> -.<span class="number">1em</span> <span class="built_in">rgba</span>(0,0,0,.15);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字体排印"><a href="#字体排印" class="headerlink" title="字体排印"></a>字体排印</h2><h3 id="连字符断行"><a href="#连字符断行" class="headerlink" title="连字符断行"></a>连字符断行</h3><p><code>hyphens</code>属性有三个值：<code>none</code>、<code>manual</code>、<code>auto</code>。<code>manual</code>为默认值，它允许任何时候手工插入软连字符（<code>&amp;shy;</code>），来实现断词折行的效果。<code>hyphens</code>属性会优先处理软连字符，再去计算其他可以断词的地方。</p>
<p><code>hyphens</code>属性的<code>auto</code>值可以比较好的实现连字符断行，不过需要在在HTML标签的<code>lang</code>属性中指定合适的语言。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">hyphens</span>: <span class="selector-tag">auto</span>;</span><br></pre></td></tr></table></figure>
<h3 id="插入换行"><a href="#插入换行" class="headerlink" title="插入换行"></a>插入换行</h3><p><code>\A</code>在Unicode中代表换行，可以用它来作为 <code>::after</code>伪元素的内容，并将其添加到每个 <code>&lt;dd&gt;</code>元素的尾部。</p>
<p>设置<a href="http://www.w3school.com.cn/cssref/pr_text_white-space.asp" rel="external nofollow noopener noreferrer" target="_blank">white-space: pre;</a> 保留源代码中 的空白符和换行。</p>
<p>如果你的结构代码在多个连续的 <code>&lt;dd&gt;</code>之间包含了（未加 注释的）空白符，那么逗号前面会有一个空格。可以利用负外边距修复这个问 题，但如果你的内容是以不一样的字体和尺寸来 显示的， 这个空隙的宽度就 不一定刚好 是 0.25em 。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">dt</span>, <span class="selector-tag">dd</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">dd</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">dd</span> + <span class="selector-tag">dt</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\A"</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: pre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">dd</span> + <span class="selector-tag">dd</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">', '</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">margin-left</span>: -.<span class="number">25em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">150%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Lea Verou<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>lea@verou.me<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>leaverou@mit.edu<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Location:<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Earth<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="文本行的斑马条纹"><a href="#文本行的斑马条纹" class="headerlink" title="文本行的斑马条纹"></a>文本行的斑马条纹</h3><p>可以在 CSS 中用渐变直接生成背景图像，用 em 单位来设定背景尺寸，这样背景就可以自动适应 font-size 的变化了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pre</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">5em</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*创建出水平条纹背景。它的background-size需要设置为line-height的两倍，因为每个背景贴片需要覆盖两行代码。*/</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">hsl</span>(20, 50%, 95%);</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">            rgba(120,0,0,.1) <span class="number">50%</span>, transparent <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">3em</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*让背景自动跟着内边距的宽度走*/</span></span><br><span class="line">    <span class="attribute">background-origin</span>: content-box;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">font-family</span>: Consolas, Monaco, monospace;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调整tab的宽度"><a href="#调整tab的宽度" class="headerlink" title="调整tab的宽度"></a>调整tab的宽度</h3><p><code>tab-size</code>属性接受一个数字（表示字符数）或者一个长度值（这个不那么实用）来调整tab缩进尺寸。</p>
<h3 id="连字"><a href="#连字" class="headerlink" title="连字"></a>连字</h3><p><code>font-variant-ligatures</code>专门用来控制连字效果的开启和关闭。如果要启用所有可能的连字，需要同时指定这三个标识符：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">font-variant-ligatures</span>: <span class="selector-tag">common-ligatures</span> <span class="selector-tag">discretionary-ligatures</span> <span class="selector-tag">historical-ligatures</span>;</span><br></pre></td></tr></table></figure>
<p>可以显式地把两种连字关闭：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">font-variant-ligatures</span>: <span class="selector-tag">common-ligatures</span> <span class="selector-tag">no-discretionary-ligatures</span> <span class="selector-tag">no-historical-ligatures</span>;</span><br></pre></td></tr></table></figure>
<p>如果要把<code>font- variant-ligatures</code>属性复位为初始值，应该使用<code>normal</code>而不是<code>none</code>，<code>none</code>会把所有连字效果都关掉。</p>
<h3 id="华丽的-amp-符号"><a href="#华丽的-amp-符号" class="headerlink" title="华丽的&amp;符号"></a>华丽的&amp;符号</h3><p>在 font-family 声明中同时指定多个字体（即字体队列 ）这样，即使我们指定的最优先字体不可用，浏览器还可以回退到其他符合整 体设计风格的字体。但是，很多开发者都忽略了一点：<strong>这个机制对单个字符 来说也是有效的</strong>。如果某款字体可用，但仅包括某几个字符，那它就只会用 来显示这几个字符；而在显示其他字符时，浏览器就会回退到其他字体。这 个规则对本地字体和通过 @font-face 规则引入的嵌入字体都是有效的。</p>
<p>@font-face 规则中的 src 描述符还可以接受 local() 函数，用于指定本地字体的名称。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> &#123; </span><br><span class="line">  <span class="attribute">font-family</span>: Ampersand; </span><br><span class="line">  <span class="attribute">src</span>: local (<span class="string">'Baskerville'</span>), </span><br><span class="line">       local (<span class="string">'Goudy Old Style'</span>),</span><br><span class="line">       local (<span class="string">'Garamond'</span>), </span><br><span class="line">       local (<span class="string">'Palatino'</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>unicode-range</code>描述符只在@font-face规则内部生效（因此这里用了描述符这个术语；它并不是一个 CSS 属性），它可以把字体作用的字符范围限制在一个子集内。它对本地字体和远程字体都是有效的。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">unicode-range</span> : <span class="selector-tag">U</span>+26;</span><br></pre></td></tr></table></figure>
<p>可以在控制台用下面语句查询字符的16进制Unicode码位：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&amp;"</span>.charCodeAt(<span class="number">0</span>).toString(<span class="number">16</span>); <span class="comment">// 返回26</span></span><br></pre></td></tr></table></figure>
<p>如果你想指定一个字符区间，还是要加上<code>U+</code>前缀， 比如<code>U+400-4FF</code>。 实际上对于这个区间来说， 你还可以使用通配符， 以这样的方式来写：<code>U+4??</code>。同时指定多个字符或多个区间也是允许的，把它们用逗号隔开即可， 比如<code>U+26,U+4??, U+2665-2670</code> 。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Ampersand;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">'Baskerville-Italic'</span>), <span class="built_in">local</span>(<span class="string">'GoudyOldStyleT-Italic'</span>), <span class="built_in">local</span>(<span class="string">'Garamond-Italic'</span>), <span class="built_in">local</span>(<span class="string">'Palatino-Italic'</span>);</span><br><span class="line">    <span class="attribute">unicode-range</span>: U+<span class="number">26</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Ampersand, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义下划线"><a href="#自定义下划线" class="headerlink" title="自定义下划线"></a>自定义下划线</h3><p>使用<code>background-image</code>及其相关属性生成下划线。可以设置两层与背景色相同的<code>text-shadow</code>来模拟下划线在遇到字母时会自动断开避让的效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(gray, gray) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">1.02em</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: .<span class="number">05em</span> <span class="number">0</span> white, -.<span class="number">05em</span> <span class="number">0</span> white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用渐变来实现下划线的高明之处在于， 这些线条 极为灵活。比如生成虚线下划线：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-tag">gray</span> 66%, <span class="selector-tag">transparent</span> 0) <span class="selector-tag">repeat-x</span>; <span class="selector-tag">background-size</span>: <span class="selector-class">.2em</span> 2<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">background-position</span>: 0 1<span class="selector-tag">em</span>;</span><br></pre></td></tr></table></figure>
<h3 id="现实中的文字效果"><a href="#现实中的文字效果" class="headerlink" title="现实中的文字效果"></a>现实中的文字效果</h3><h4 id="凸版印刷效果"><a href="#凸版印刷效果" class="headerlink" title="凸版印刷效果"></a>凸版印刷效果</h4><p>出现在底部的浅色投影（或者出现在顶部的暗色投影）会让人 产生物体是凹进平面内的错觉。同理，出现在底部的暗色投影（或者出现在 顶部的浅色投影）会让人产生物体从平面上凸起的错觉。</p>
<h4 id="空心字效果"><a href="#空心字效果" class="headerlink" title="空心字效果"></a>空心字效果</h4><ul>
<li>使用多个 text-shadow ，分别为这些投影加上不同方向的少量偏移：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">deeppink</span>;</span><br><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">text-shadow</span>: 1<span class="selector-tag">px</span> 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>, <span class="selector-tag">-1px</span> <span class="selector-tag">-1px</span> <span class="selector-tag">black</span>,</span><br><span class="line">             1<span class="selector-tag">px</span> <span class="selector-tag">-1px</span> <span class="selector-tag">black</span>,<span class="selector-tag">-1px</span> 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>重叠多层轻微模糊的投影来模拟描边。这种方法不需要设置偏移量，但是性能较差，因为使用了模糊算法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">deeppink</span>;</span><br><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">white</span>;</span><br><span class="line"><span class="selector-tag">text-shadow</span>: 0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>, 0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>,</span><br><span class="line">             0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>, 0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>,</span><br><span class="line">             0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>, 0 0 1<span class="selector-tag">px</span> <span class="selector-tag">black</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>SVG方案：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">500%</span>/<span class="number">1</span> Rockwell, serif;</span><br><span class="line">    <span class="attribute">background</span>: deeppink;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">    <span class="attribute">fill</span>: currentcolor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> <span class="selector-tag">svg</span>&#123;</span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> <span class="selector-tag">use</span>&#123;</span><br><span class="line">    <span class="attribute">stroke</span>: black;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">6</span>;</span><br><span class="line">    <span class="attribute">stroke-linejoin</span>: round;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"2em"</span> <span class="attr">height</span>=<span class="string">"1.2em"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#css"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">id</span>=<span class="string">"css"</span> <span class="attr">y</span>=<span class="string">"1em"</span>&gt;</span>css<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="文字外发光效果"><a href="#文字外发光效果" class="headerlink" title="文字外发光效果"></a>文字外发光效果</h4><ul>
<li>通过几层重叠的 text-shadow，但是依赖 text-shadow 来实现文字显示的做法无法实 现平稳退化：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.p1</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">250%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#203</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p1</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> .<span class="number">1em</span>, <span class="number">0</span> <span class="number">0</span> .<span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 CSS 滤镜来实现文字的模糊效果：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.span3</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">250%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#203</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.span3</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(.1em);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="文字凸起效果"><a href="#文字凸起效果" class="headerlink" title="文字凸起效果"></a>文字凸起效果</h4><p>使用一长串累加的投影， 不设模糊并以 1px 的跨度逐渐错开，使颜色逐渐变暗，然后在底部加一层强 烈模糊的暗投影，从而模拟完整的立体效果。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.p1</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">250%</span>/<span class="number">1.6</span> Baskerville, Palatino, serif;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="built_in">hsl</span>(0,0%,85%),</span><br><span class="line">                 <span class="number">0</span> <span class="number">2px</span> <span class="built_in">hsl</span>(0,0%,80%),</span><br><span class="line">                 <span class="number">0</span> <span class="number">3px</span> <span class="built_in">hsl</span>(0,0%,75%),</span><br><span class="line">                 <span class="number">0</span> <span class="number">4px</span> <span class="built_in">hsl</span>(0,0%,70%),</span><br><span class="line">                 <span class="number">0</span> <span class="number">5px</span> <span class="built_in">hsl</span>(0,0%,65%),</span><br><span class="line">                 <span class="number">0</span> <span class="number">5px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="环形文字"><a href="#环形文字" class="headerlink" title="环形文字"></a>环形文字</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circular"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">"0 0 100 100"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M 0,50 a 50,50 0 1,1 0,1 z"</span> <span class="attr">id</span>=<span class="string">"circle"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">textPath</span> <span class="attr">xlink:href</span>=<span class="string">"#circle"</span>&gt;</span></span><br><span class="line">                circular reasoning works because</span><br><span class="line">            <span class="tag">&lt;/<span class="name">textPath</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>M 0,50</code> ：移动到点 (0,50) 。</li>
<li><code>a 50,50 0 1,1 0,1</code> ：以当前所在的这个点为起点，以当前点右侧 0单位、下方 1 单位的那个点为终点， 画一段圆弧。这段圆弧的水平 半径和垂直半径都必须是 50。如果存在两种可能的圆弧度数，选择 度数较大的那一种；同时，如果存在两种可能的圆弧方向， 选择画 在这两个点右侧的那一种，而不是左侧的。</li>
<li><code>z</code> ：用一条直线线段闭合这条路径。</li>
<li>通过 <code>&lt;text&gt;</code> 和 <code>&lt;textPath&gt;</code>元素来添加文本，并通过<code>xlink:href</code>属性来把它链接到这个圆上：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.circular</span> <span class="selector-tag">path</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.circular</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30em</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*把 SVG 元素自身往下推*/</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">3em</span> auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.circular</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*取消把溢出内容裁切效果*/</span></span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用脚本遍历所有设置了 circular 类的元素，将其文本内容删除并保存在变量中，然后为其填入必要的 SVG 元素：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circular"</span> &gt;</span></span><br><span class="line">  circular reasoning works because </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$$(<span class="string">'.circular'</span>).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> NS = <span class="string">"http://www.w3.org/2000/svg"</span>;</span><br><span class="line">    <span class="keyword">var</span> xlinkNS = <span class="string">"http://www.w3.org/1999/xlink"</span>;</span><br><span class="line">    <span class="keyword">var</span> svg = <span class="built_in">document</span>.createElementNS(NS, <span class="string">"svg"</span>);</span><br><span class="line">    <span class="keyword">var</span> circle = <span class="built_in">document</span>.createElementNS(NS, <span class="string">"path"</span>);</span><br><span class="line">    <span class="keyword">var</span> text = <span class="built_in">document</span>.createElementNS(NS, <span class="string">"text"</span>);</span><br><span class="line">    <span class="keyword">var</span> textPath = <span class="built_in">document</span>.createElementNS(NS, <span class="string">"textPath"</span>);</span><br><span class="line">    svg.setAttribute(<span class="string">"viewBox"</span>, <span class="string">"0 0 100 100"</span>);</span><br><span class="line"></span><br><span class="line">    circle.setAttribute(<span class="string">"d"</span>, <span class="string">"M0,50 a50,50 0 1,1 0,1z"</span>);</span><br><span class="line">    circle.setAttribute(<span class="string">"id"</span>, <span class="string">"circle"</span>);</span><br><span class="line"></span><br><span class="line">    textPath.textContent = el.textContent;</span><br><span class="line">    textPath.setAttributeNS(xlinkNS, <span class="string">"xlink:href"</span>, <span class="string">"#circle"</span>);</span><br><span class="line"></span><br><span class="line">    text.appendChild(textPath);</span><br><span class="line">    svg.appendChild(circle);</span><br><span class="line">    svg.appendChild(text);</span><br><span class="line">    el.textContent = <span class="string">''</span>;</span><br><span class="line">    el.appendChild(svg);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h2><h3 id="选择合适的鼠标光标"><a href="#选择合适的鼠标光标" class="headerlink" title="选择合适的鼠标光标"></a>选择合适的鼠标光标</h3><h4 id="提示禁用状态"><a href="#提示禁用状态" class="headerlink" title="提示禁用状态"></a>提示禁用状态</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:disabled</span> , <span class="selector-attr">[ disabled ]</span>, <span class="selector-attr">[ aria - disabled ="true"]</span> &#123; </span><br><span class="line">    <span class="attribute">cursor </span>: not-allowed; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="隐藏鼠标光标"><a href="#隐藏鼠标光标" class="headerlink" title="隐藏鼠标光标"></a>隐藏鼠标光标</h4><p>在css2.1中需要用到一张 1×1 的透明 GIF 图片，然后<code>cursor:url(&#39;transparent.gif&#39;);</code></p>
<p>在css3中只要：<code>cursor: none;</code>。</p>
<h3 id="扩大可点击区域"><a href="#扩大可点击区域" class="headerlink" title="扩大可点击区域"></a>扩大可点击区域</h3><blockquote>
<p>Fitts 法则认为，人类移动到某个 目标区域所需的最短时间是由目标距离与目标宽度之比所构成的对数函数。</p>
</blockquote>
<ul>
<li>为按钮设置一圈透明边框：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="selector-tag">border</span>: 10<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">transparent</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/*把背景限制在原本的区域内*/</span></span><br><span class="line">   <span class="selector-tag">background</span>: <span class="selector-id">#58a</span>;</span><br><span class="line"></span><br><span class="line">   <span class="selector-tag">background-clip</span>: <span class="selector-tag">padding-box</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*用box-shadow模拟边框*/</span></span><br><span class="line">   <span class="selector-tag">box-shadow</span>: 0 0 0 1<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.3</span>) <span class="selector-tag">inset</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过伪元素代表其宿主元素来响应鼠标交互：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">3em</span> .<span class="number">5em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(0,0,0,.3);</span><br><span class="line">    <span class="attribute">box-shadow</span>:  <span class="number">0</span> .<span class="number">1em</span> .<span class="number">2em</span> -.<span class="number">05em</span> <span class="built_in">rgba</span>(0,0,0,.5);</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">150%</span>/<span class="number">1</span> sans-serif;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button1</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*伪元素在四个方向上都比宿主元素大出10px*/</span></span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">10px</span>; <span class="attribute">right</span>: -<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">10px</span>; <span class="attribute">left</span>: -<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义复选框"><a href="#自定义复选框" class="headerlink" title="自定义复选框"></a>自定义复选框</h3><p id="div-border-left-yellow">伪类选择符<code>:checked</code>和属性选择符<code>[checked]</code>的区别是：后者不会根据用户的交互行为进行更新，因为用户的交互不会影响到HTML标签上的属性。</p>

<p>可以基于复选框的勾选状态借助组合选择符来给其他元素设置样式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span> &#123;</span><br><span class="line">  <span class="comment">/*隐藏原始的复选框，不能使用display: none，这样会把它从tab键切换焦点的队列完全删除*/</span></span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">clip</span>: <span class="built_in">rect</span>(0,0,0,0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置紧邻input的label伪元素样式*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span> + <span class="selector-tag">label</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">'\a0'</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: .<span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">width</span>: .<span class="number">8em</span>;</span><br><span class="line">    <span class="attribute">height</span>: .<span class="number">8em</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: .<span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: .<span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">background</span>: silver;</span><br><span class="line">    <span class="attribute">text-indent</span>: .<span class="number">15em</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: .<span class="number">65</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置紧邻已经勾选的input的label伪元素的样式*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">'\2713'</span>;</span><br><span class="line">    <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> .<span class="number">1em</span> .<span class="number">1em</span> <span class="number">#58a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span><span class="selector-pseudo">:disabled</span> + <span class="selector-tag">label</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: gray;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: not-allowed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"awesome"</span> <span class="attr">autofocus</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"awesome"</span>&gt;</span>Awesome!<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170323149027543475606.png" alt="20170323149027543475606.png"></p>
<p>把<code>&lt;label&gt;</code>元素与复选框关联，让它起到触发开关的作用，为它添加生成性内 容（伪元素），并基于复选框的状态来为其设置样式。把真正 的复选框隐藏起来，再 把生成性内容美化一番，用来顶替原来的复选框。</p>
<h4 id="开关式按钮"><a href="#开关式按钮" class="headerlink" title="开关式按钮"></a>开关式按钮</h4><p>用同样的思路可以实现开关式按钮：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">clip</span>: <span class="built_in">rect</span>(0,0,0,0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">35em</span> .<span class="number">5em</span> .<span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#ddd, #bbb);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(0,0,0,.2);</span><br><span class="line">    <span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> white inset;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> white;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="checkbox"]</span><span class="selector-pseudo">:active</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: .<span class="number">04em</span> .<span class="number">1em</span> .<span class="number">2em</span> <span class="built_in">rgba</span>(0,0,0,.6) inset;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="built_in">rgba</span>(0,0,0,.3);</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#bbb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"awesome"</span> <span class="attr">autofocus</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"awesome"</span>&gt;</span>Awesome!<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170321149010784150345.png" alt="20170321149010784150345.png"></p>
<p>在绝大多数场景下，开关式按钮 对可用性有负面作用，因为它们很容易与普通按钮混淆，让人误以为按下它 会触发某个动作。</p>
<h3 id="通过阴影来弱化背景"><a href="#通过阴影来弱化背景" class="headerlink" title="通过阴影来弱化背景"></a>通过阴影来弱化背景</h3><h4 id="配合HTML实现"><a href="#配合HTML实现" class="headerlink" title="配合HTML实现"></a>配合HTML实现</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*用于遮挡背景*/</span></span><br><span class="line"><span class="selector-class">.overlay</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0,0,0,.8);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*需要吸引用户注意的元素*/</span></span><br><span class="line"><span class="selector-class">.lightbox</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>; <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方案需要增加额外的HTML，<code>.overlay</code>负责把这个关键元素背后的所有东西调暗。</p>
<h4 id="伪元素方案-1"><a href="#伪元素方案-1" class="headerlink" title="伪元素方案"></a>伪元素方案</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lightbox</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0, 0, 0, .8);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lightbox</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>; <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-yellow">这个方案没有成功~~~</p>

<h4 id="box-shadow方案-1"><a href="#box-shadow方案-1" class="headerlink" title="box-shadow方案"></a>box-shadow方案</h4><p><code>box-shadow</code>的扩张参数可以把元素的投影向各个方 向延伸放大。具体做法就是生成一个巨大的投影，不偏移也不模糊，简单而 拙劣地模拟出遮罩层的效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lightbox</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">50vmax</span> <span class="built_in">rgba</span>(0, 0, 0, .8);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>vmax</code>是视口单位，<code>1vmax</code>相当于<code>1vw</code>和<code>1vh</code>两者中的较大值。<code>100vw</code>等于整 个视口的宽度，<code>100vh</code>就是视口的高度。因此，满足我们需求的最小值就是<code>50vmax</code>。 由于投影是同时向四个方向扩展的， 这个遮罩层的最终尺寸将是<code>100vmax</code>加上元素本身的尺寸。</p>
<p>这个方案的缺点是：</p>
<ol>
<li>由于遮罩层的尺寸是与视口相关，而不是与页面相关的，当我们 滚动页面时，遮罩层的边缘就露出来了，除非给它加上<code>position: fixed;</code></li>
<li>当使用一个独立的元素（或伪元素）来实现遮罩层时，这个遮罩 层不仅可以从视觉上把用户的注意力引导到关键元素上，还可以防止用户的 鼠标与页面的其他部分发生交互， 因为遮罩层会捕获所有指针事件。<code>box- shadow</code>并没有这种能力， 因此它只能在视觉上起到引导注意力的作用， 却 无法阻止鼠标交互。</li>
</ol>
<h4 id="backdrop方案"><a href="#backdrop方案" class="headerlink" title="backdrop方案"></a>backdrop方案</h4><p><code>&lt;dialog&gt;</code>元素可以由它的<code>showModal()</code>方法显示出来。根据浏览器 的默认样式，它会自带一个遮罩层。借助<code>::backdrop</code>伪元素，这个原生的 遮罩层也是可以设置样式的，比如可以把它变得更暗一些：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">dialog</span><span class="selector-pseudo">::backdrop</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0,0,0,.8)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"document.querySelector('#modal').showModal()"</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dialog</span> <span class="attr">id</span>=<span class="string">"modal"</span>&gt;</span></span><br><span class="line">    O HAI!</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"this.parentNode.close()"</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>浏览器对它的支持还极为有限。</strong></p>
<h3 id="通过模糊来弱化背景"><a href="#通过模糊来弱化背景" class="headerlink" title="通过模糊来弱化背景"></a>通过模糊来弱化背景</h3><p><code>&lt;main&gt;</code>元素它可以把页面中的主要内容标记出来（对话框通常都不是主要内 容），同时还给了我们添加样式的钩子。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>.....<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dialog</span>&gt;</span>o hai<span class="tag">&lt;/<span class="name">dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">main</span><span class="selector-class">.de-emphasized</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-filter</span>: <span class="built_in">blur</span>(3px);</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(3px);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">6s</span>;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以通过<code>contrast()</code>和<code>brightness()</code>滤镜同时实现模糊效果和阴影效果来弱化背景：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">blur</span>(3<span class="selector-tag">px</span>) <span class="selector-tag">contrast</span>(<span class="selector-class">.8</span>) <span class="selector-tag">brightness</span>(<span class="selector-class">.8</span>);</span><br></pre></td></tr></table></figure>
<p>但是这个方法没有任何回退方案。</p>
<h3 id="滚动提示"><a href="#滚动提示" class="headerlink" title="滚动提示"></a>滚动提示</h3><p id="div-border-left-yellow"><code>background-attachment</code>属性有三个值：<code>scroll</code>、<code>fixed</code>、<code>local</code>。<br><br><code>scroll</code>是默认值，背景图像会随着页面其余部分的滚动而移动。<br><br><code>fixed</code>表示页面的其余部分滚动背景图像不会移动。<br><br><code>local</code>表示背景相对于元素的内容固定。如果一个元素拥有滚动机制，背景将会随着元素的内容滚动， 并且背景的绘制区域和定位区域是相对于可滚动的区域而不是包含他们的边框。</p>

<p><img src="/assets/images/《CSS揭秘》学习笔记/20170324149035995238752.gif" alt="20170324149035995238752.gif"></p>
<p>达到上面动图的效果，需要用两层背景，一层用来生成那条阴影，另一层基本 上就是一个用来遮挡阴影的白色矩形，其作用类似于遮罩层。生成阴影的那 层背景将具有默认的 <code>background-attachment</code>值（<code>scroll</code>），因为我们希望 它总是保持在原位。 我们把遮罩背景的<code>background-attachment</code>属性设置 为<code>local</code>，这样它就会在我们滚动到最顶部时盖住阴影，在向下滚动时跟着 滚动，从而露出阴影。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="comment">/*基本样式，让ul的高度小于内容的高度*/</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">7.2em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7em</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid silver;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">3em</span> .<span class="number">5em</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">2em</span>;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">100</span> <span class="number">200%</span>/<span class="number">1.6</span> <span class="string">'Frutiger LT Std'</span>, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ul1</span> &#123;</span><br><span class="line">  <span class="comment">/*通过径向渐变生成顶部的阴影，但是生成的阴影出现的时机和我们期望的相反*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(at top,rgba(0,0,0,.2), transparent <span class="number">70%</span>) no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background-attachment</span>: local;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">----------</span>进化<span class="selector-tag">----------</span></span><br><span class="line"><span class="selector-class">.ul2</span> &#123;</span><br><span class="line">  <span class="comment">/*通过线性渐变生成白色矩形来遮挡阴影*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(white,white),</span><br><span class="line">            <span class="built_in">radial-gradient</span>(at top,rgba(0,0,0,.2), transparent <span class="number">70%</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background-attachment</span>: local,scroll;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">----------</span>进化<span class="selector-tag">----------</span></span><br><span class="line"><span class="selector-class">.ul3</span> &#123;</span><br><span class="line">  <span class="comment">/*生成底部的阴影和遮挡矩形，并且把白色矩形的渐变颜色改成linear-gradient(white,hsla(0,0%,100%,0))，这样可以让阴影的显现变得平滑*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(white 15px, hsla(0,0%,100%,0)) <span class="number">0</span> <span class="number">0</span> / <span class="number">100%</span> <span class="number">50px</span>,</span><br><span class="line">    <span class="built_in">radial-gradient</span>(at top, rgba(0,0,0,.2), transparent <span class="number">70%</span>) <span class="number">0</span> <span class="number">0</span> / <span class="number">100%</span> <span class="number">15px</span>,</span><br><span class="line">    <span class="built_in">linear-gradient</span>(to top, white 15px, hsla(0,0%,100%,0)) bottom / <span class="number">100%</span> <span class="number">50px</span>,</span><br><span class="line">    <span class="built_in">radial-gradient</span>(at bottom, rgba(0,0,0,.2), transparent <span class="number">70%</span>) bottom / <span class="number">100%</span> <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: local, scroll, local, scroll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="交互式的图片对比控件"><a href="#交互式的图片对比控件" class="headerlink" title="交互式的图片对比控件"></a>交互式的图片对比控件</h3><h4 id="CSS-resize方案"><a href="#CSS-resize方案" class="headerlink" title="CSS resize方案"></a>CSS resize方案</h4><p id="div-border-left-yellow"><code>resize</code>属性控制元素是否能被用户缩放，有<code>none</code>、<code>both</code>、<code>horizontal</code>、<code>vertical</code>、<code>block</code>、<code>inline</code>这几个属性。其中：<br><br><code>none</code>表示元素不能被用户缩放。<br><br><code>both</code>表示允许用户在水平和垂直方向上调整元素的大小。<br><br><code>horizontal</code>表示允许用户在水平方向上调整元素的大小。<br><br><code>vertical</code>表示允许用户在垂直方向上调整元素的大小。<br><br>如果一个block元素的 overflow 属性被设置成了visible，那么resize属性对该元素无效。</p>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"image-slider"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace-before.jpg"</span> <span class="attr">alt</span>=<span class="string">"Before"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-slider1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image-slider1</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;<span class="comment">/*设置初识宽度*/</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;<span class="comment">/*剪裁图片*/</span></span><br><span class="line">    <span class="attribute">resize</span>: horizontal;<span class="comment">/*动态改变宽度*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image-slider1</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170326149045846499392.gif" alt="20170326149045846499392.gif"></p>
<p>可以看到已经可以随心所欲的改变图片的宽度了，但是调节手柄不容易辨认，而且<code>&lt;div&gt;</code>的宽度拉伸超过了图片宽度的（可以注意动图最后右下角调节手柄的位置）。</p>
<p>超出图片宽度只要这样设置<code>max-width: 100%</code>。</p>
<p>调节手柄可以通过伪元素覆盖在调节手柄之上：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-slider2</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>; <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-45deg, white 50%, transparent 0);</span><br><span class="line">    <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">    <span class="attribute">cursor</span>: ew-resize;</span><br><span class="line">    <span class="attribute">-webkit-filter</span>: <span class="built_in">drop-shadow</span>(0 0 2px black);</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(0 0 2px black);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>cursor: ew-resize;</code>表示鼠标变成<img src="/assets/images/《CSS揭秘》学习笔记/20170326149046148716437.png" alt="20170326149046148716437.png"></p>
<p>这个方案对键盘来说是不可访问的。</p>
<h4 id="范围输入控件方案"><a href="#范围输入控件方案" class="headerlink" title="范围输入控件方案"></a>范围输入控件方案</h4><p>将原生的滑块控件覆盖在图片上，通过js脚本将滑块移动和<code>&lt;div&gt;</code>的宽度联系起来，实现用控件控制的效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"image-slider3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace-before.jpg"</span> <span class="attr">alt</span>=<span class="string">"Before"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace.jpg"</span> <span class="attr">alt</span>=<span class="string">"After"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$$(<span class="string">'.image-slider3'</span>).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">slider</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//创建附加的div元素，并用它包裹住第一个图片元素</span></span><br><span class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">    <span class="keyword">var</span> img = slider.querySelector(<span class="string">"img"</span>);</span><br><span class="line">    slider.insertBefore(div,img);</span><br><span class="line">    div.appendChild(img);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建滑块</span></span><br><span class="line">    <span class="keyword">var</span> range = <span class="built_in">document</span>.createElement(<span class="string">"input"</span>);</span><br><span class="line">    range.type = <span class="string">'range'</span>;</span><br><span class="line">  	<span class="comment">//滑块和div宽度绑定</span></span><br><span class="line">    range.oninput = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        div.style.width = <span class="keyword">this</span>.value + <span class="string">"%"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    slider.appendChild(range);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$$</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    context = context || <span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">var</span> elements = context.querySelectorAll(selector);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(elements);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-slider3</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image-slider3</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;<span class="comment">/*设置初识宽度*/</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;<span class="comment">/*剪裁图片*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image-slider3</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.image-slider3</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170326149052890247896.gif" alt="20170326149052890247896.gif"></p>
<p>可以通过混合模式、滤镜和变形来优化控件：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-slider3</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="comment">/*width: 100%;*/</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">contrast</span>(.5);</span><br><span class="line">    <span class="attribute">mix-blend-mode</span>: luminosity;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(2);</span><br><span class="line">    <span class="attribute">transform-origin</span>: left bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170326149053016694527.png" alt="20170326149053016694527.png"></p>
<h2 id="结构与布局"><a href="#结构与布局" class="headerlink" title="结构与布局"></a>结构与布局</h2><h3 id="自适应内部元素"><a href="#自适应内部元素" class="headerlink" title="自适应内部元素"></a>自适应内部元素</h3><p><code>width</code>和<code>height</code>属性有一个新的关键字： <code>min-content</code>，这个关键字将解析为这个容器内部最大的不可断行元素的宽度（即最宽的单词、图片或者具有固定宽度的盒元素）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Let’s assume we have some text here. Bacon ipsum dolor sit amet turkey veniam shankle, culpa short ribs kevin t-bone occaecat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://csssecrets.io/images/adamcatlace.jpg"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span></span><br><span class="line">        The great Sir Adam Catlace was named after Countess Ada Lovelace, the first programmer ever.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>We also have some more text here. Et laborum venison nostrud, ut veniam sint kielbasa ullamco pancetta.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">figure</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">300px</span>;<span class="comment">/*为了向下兼容*/</span></span><br><span class="line">    <span class="attribute">max-width</span>: min-content;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">figure</span> &gt; <span class="selector-tag">img</span> &#123; <span class="attribute">max-width</span>: inherit &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Basic styling */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">figure</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid silver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-yellow"> <code>width</code>和<code>height</code>属性其他的值还有<code>max-content</code>，它的行为类似于<code>display: inline-block</code>；<code>fit-content</code>的行为与浮动元素是相同的（和<code>min-content</code>效果通常一致，但也有例外）</p>

<h3 id="精确控制表格列宽"><a href="#精确控制表格列宽" class="headerlink" title="精确控制表格列宽"></a>精确控制表格列宽</h3><p><code>table-layout</code>属性有<code>auto</code>和<code>fixed</code>两个值：</p>
<p><code>auto</code>的行为模式被称为自动表格布局算法，会根据内容自动调整表格宽度。</p>
<p><code>fixed</code>表示表和列宽度由表和元素的宽度或第一行单元格的宽度来设置。后续行中的单元格不会影响列宽度。</p>
<p><code>table-layout: fixed</code>这种固定表格布局算法不仅更容易预测、便于使用，同时也明显更快。 因为表格的内容并不会影响单元格的宽度，所以在页面的下载过程中，表格 不需要频繁重绘。</p>
<p>在使用时，我们只需要对 <code>&lt;table&gt;</code>元素或其他具有<code>display: table</code>样 式的元素应用这个属性即可。 请注意， 为了确保这个技巧奏效， 需要为这 些表格元素指定一个宽度（哪怕是 100% ）。 同样， 为了让<code>text-overflow: ellipsis</code>发挥作用， 我们还需要为那一列指定宽度。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>&#123;</span><br><span class="line">  <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="根据兄弟元素的数量来设置样式"><a href="#根据兄弟元素的数量来设置样式" class="headerlink" title="根据兄弟元素的数量来设置样式"></a>根据兄弟元素的数量来设置样式</h3><p><code>:only-child</code>可以用来定义只有一个子元素时的样式。等效于<code>:first-child:last-child</code>。<code>:last-child</code>相当于<code>:nth-last-child(1)</code>。</p>
<p><code>li:first-child:nth-last-child(4)</code>表示一个正好有四个列表项的列表中的第一个列表项。如下图所示：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170327149061544672626.png" alt="20170327149061544672626.png"></p>
<p>通过<code>:first-child:nth-last-child()</code>找到特定数量列表中的第一项，然后可以使用兄弟选择器<code>~</code>来命中它之后的所有兄弟元素，这样就达到了选定特定数量列表项中每个元素的目的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( 4 ), <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( 4 ) ~ <span class="selector-tag">li</span> &#123; <span class="comment">/* 当列表正好包含四项时，命中所有列表项 */</span> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="根据兄弟元素的数量范围来匹配元素"><a href="#根据兄弟元素的数量范围来匹配元素" class="headerlink" title="根据兄弟元素的数量范围来匹配元素"></a>根据兄弟元素的数量范围来匹配元素</h3><p><code>:nth-child()</code>中的参数不仅可以是数字还可以是<code>an+b</code>这样的表达式。如果参数是<code>n+b</code>这样的表达式，不论<code>n</code>取何值，这个表达式无法产生小于<code>b</code>的值，因此<code>n+b</code>这个表达式可以选择从第<code>b</code>个元素开始的所有子元素。</p>
<p>同样<code>n+b</code>这个表达式也可以用在<code>:nth-last-child ()</code>上，这样可以在列表总数是<code>b</code>或者更多时选中所有列表项：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">n</span> + 4 ), <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">n</span> + 4 ) ~ <span class="selector-tag">li</span> &#123; <span class="comment">/* 当列表至少包含四项时，命中所有列表项 */</span> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170327149062019924399.png" alt="20170327149062019924399.png"></p>
<p><code>-n+b</code>表达式可以选中开头的<code>b</code>个元素。这样可以在列表总数是<code>b</code>或者更少时选中所有列表项：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">-n</span> + 4 ), <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">-n</span> + 4 ) ~ <span class="selector-tag">li</span> &#123; <span class="comment">/* 当列表最多包含四项时，命中所有列表项 */</span> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170327149062161374219.png" alt="20170327149062161374219.png"></p>
<p>这两个技巧还可以组合起来使用，比如在列表包含2~4个列表项时命中所有的列表项：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">n</span> + 2 ) <span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">-n</span> + 4 ), <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">n</span> + 2 ) <span class="selector-pseudo">:nth-last-child</span> ( <span class="selector-tag">-n</span> + 4 ) ~ <span class="selector-tag">li</span> &#123; <span class="comment">/* 当列表包含2～4项时，命中所有列表项 */</span> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170327149062211440753.png" alt="20170327149062211440753.png"></p>
<h3 id="满幅的背景，定宽的内容"><a href="#满幅的背景，定宽的内容" class="headerlink" title="满幅的背景，定宽的内容"></a>满幅的背景，定宽的内容</h3><p><code>calc()</code>函数允许在css中直接进行简单的算式来指定属性的值。</p>
<p id="div-border-left-red">别忘了在<code>calc()</code>函数中用 空白符把<code>-</code>和<code>+</code>隔起来，否则会 产生解析错误！这个看似怪异的规则是为了向前兼容，因为在未来，<code>calc()</code>可能会允许使用标识符， 而这些标识符本身可能会包含连字符，容易与减号混淆。</p>

<p>如果内容居中，左右外边距实际上都等于视口宽度的一半减去内容宽度的一半，而且使用<code>calc()</code>函数计算出的值可以用在任何一个接受长度值的属性上，所以可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">footer</span>&gt;</span><br><span class="line">	&lt;div class="wrapper"&gt;</span><br><span class="line">	&lt;!<span class="selector-tag">--</span>内容<span class="selector-tag">--</span>&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line">      </span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>:<span class="number">900px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">1em</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">-------</span>升级<span class="selector-tag">-------</span></span><br><span class="line">&lt;<span class="selector-tag">footer</span>&gt;</span><br><span class="line">	&lt;!<span class="selector-tag">--</span>内容<span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">900px</span>;<span class="comment">/*这一行声明注释掉没影响，因为当内边距是 50% - 450px 时，只可能给内容留出 900px （2× 450px ）的可用空 间。 只有把 width 显式地设置为 900px 之外（或大或小）的其他值， 我们 才有可能看出区别。由于我们想要得到的内容宽度本来就是 900px ，这一行 声明其实就是冗余的，我们可以把它去掉*/</span></span><br><span class="line"></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1em</span> <span class="built_in">calc</span>(50% - 450px);</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">-------</span>升级<span class="selector-tag">-------</span></span><br><span class="line">&lt;<span class="selector-tag">footer</span>&gt;</span><br><span class="line">	&lt;!<span class="selector-tag">--</span>内容<span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1em</span>;	<span class="comment">/*向后兼容，避免浏览器不支持calc()函数*/</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1em</span> <span class="built_in">calc</span>(50% - 450px);</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h3><h4 id="基于绝对定位的解决方案"><a href="#基于绝对定位的解决方案" class="headerlink" title="基于绝对定位的解决方案"></a>基于绝对定位的解决方案</h4><p>先把这个元素的左上角放置在视 口（或最近的、具有定位属性的祖先元素）的正中心，然后再利用负外边距 把它向左、向上移动（移动距离相当于它自身宽高的一半），从而把元素的 正中心放置在视口的正中心。借助<code>calc()</code>函数可以简化代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main1</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">5em</span>; <span class="comment">/*6/2=3*/</span></span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">9em</span>; <span class="comment">/*18/2=9*/</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">-------</span>升级<span class="selector-tag">-------</span></span><br><span class="line"><span class="selector-class">.main1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="built_in">calc</span>(50% - 9em);</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(50% - 5em);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们在 translate() 变形函数中使用百分比值时，是以这个元素自身的宽度和高度 为基准进行换算和移动的，而这正是我们所需要的。接下来，只要换用基于 百分比的 CSS 变形来对元素进行偏移， 就不需要在偏移量中把元素的尺寸 写死了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-yellow"><code>translate()</code>用来移动元素在平面上的位置。这种变换的特点是一个向量，其坐标定义多少，它在每个方向移动多少。<br><br><img src="/assets/images/《CSS揭秘》学习笔记/20170328149070517652749.png" alt="20170328149070517652749.png"></p>

<p>这个方案有以下缺点：</p>
<ul>
<li>需要绝对定位，对整个布局的影响太过强烈</li>
<li>如果需要居中的元素已经在高度上超过了视口，那它的顶部会被视 口裁切掉</li>
<li>在某些浏览器中，这个方法可能会导致元素的显示有一些模糊，因 为元素可能被放置在半个像素上。 这个问题可以用 transform- style: preserve-3d 来修复，不过很难保证它在未来不会出问题。</li>
</ul>
<h4 id="基于视口单位的解决方案"><a href="#基于视口单位的解决方案" class="headerlink" title="基于视口单位的解决方案"></a>基于视口单位的解决方案</h4><p>原理和上面的方案一样，不过通过<code>margin</code>属性的百分比值来控制元素左上角位于容器的中心，然后再用<code>translate()</code>技巧来把元素以其自身高度宽高的一半为距离进行移动。</p>
<p><code>margin</code>的百分比是以<span id="inline-red">父元素的宽度</span>作为解析基准的。</p>
<p>css3定义了一套与视口相关的长度单位：</p>
<ul>
<li><code>vw</code>是与视口宽度相关的。<code>1vw</code>实际上表示视口宽度的1%，而不是100%。</li>
<li><code>1vh</code>表示视口高度的1%。</li>
<li>当视口宽度小于高度时，<code>1vmin</code>等于<code>1vw</code>，否则等于<code>1vh</code>。</li>
<li>当视口宽度大于高度时，<code>1vmax</code>等于<code>1vw</code>，否则等于<code>1vh</code>。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18em</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span> <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50vh</span> auto <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方案只适合在视口中居中的场景。</p>
<h4 id="基于Flexbox的解决方案"><a href="#基于Flexbox的解决方案" class="headerlink" title="基于Flexbox的解决方案"></a>基于Flexbox的解决方案</h4><p>先给这个待居中元素的父元素设置<code>display: flex</code>（在这个例子中是<code>&lt;body&gt;</code>元素），再给这个元素自身设置<code>margin: auto</code>（在这个例子中是<code>&lt;main&gt;</code>元素）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们使用 Flexbox 时，<code>margin: auto</code>不仅在水平方向上将元 素居中，垂直方向上也是如此。我们甚至不需要指定任何宽度（如果需要的话，也是可以指定的）：这个居中元素分配到的宽度等于<code>max- content</code>。</p>
<p>Flexbox 的另一个好处在于，它还可以将匿名容器（即没有被标签包裹 的文本节点）垂直居中。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>Center me,please!<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">main</span> &#123; </span><br><span class="line">  <span class="attribute">display </span>: flex; </span><br><span class="line">  <span class="attribute">align-items </span>: center; </span><br><span class="line">  <span class="attribute">justify-content </span>: center; </span><br><span class="line">  <span class="attribute">width </span>: <span class="number">18em</span>; </span><br><span class="line">  <span class="attribute">height </span>: <span class="number">10em</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-yellow"><code>justify-content</code>用于设置或检索弹性盒子元素在主轴（横轴）方向上的对齐方式。<br><br><code>align-items</code>属性属性定义flex子项在flex容器的当前行的侧轴（纵轴）方向上的对齐方式。这意味着它像<code>justify-content</code>一样，但是在垂直方向。</p>

<p><code>align-self</code>属性规定弹性盒子元素内被选中项目的对齐方式。直接用<code>align-self: center</code>就可以实现垂直居中。</p>
<h3 id="紧贴底部的页脚"><a href="#紧贴底部的页脚" class="headerlink" title="紧贴底部的页脚"></a>紧贴底部的页脚</h3><h4 id="固定高度的解决方案"><a href="#固定高度的解决方案" class="headerlink" title="固定高度的解决方案"></a>固定高度的解决方案</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Site name<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"contents"</span> /&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"contents"</span>&gt;</span>Toggle contents<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Bacon ipsum dolor ....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>© 2015 No rights reserved.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Made with ♥ by an anonymous pastafarian.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>计算出页脚所占高度和大标题与最顶部的距离，然后让内容的最小高度为（视口高度-页脚所占高度-大标题与最顶部的距离）。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">main</span> &#123; </span><br><span class="line">  <span class="attribute">min-height </span>: <span class="built_in">calc</span>(100vh - 2.5em - 7em); </span><br><span class="line">  <span class="comment">/* 避免内边距或边框搞乱高度的计算： */</span> </span><br><span class="line">  <span class="attribute">box-sizing </span>: border-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者直接把<code>&lt;header&gt;</code>和<code>&lt;main&gt;</code>元素包在一个容器里面，这样只要计算页脚高度：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#wrapper</span> &#123; </span><br><span class="line">  <span class="attribute">min-height</span>: <span class="built_in">calc</span>(100vh - 7em); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这套方案不仅要求我们确保页脚内的文本永远不会折行， 而且每当我们改变页脚的尺寸时，都需要跟着调整<code>min-height</code>值。</p>
<h4 id="更灵活的解决方案"><a href="#更灵活的解决方案" class="headerlink" title="更灵活的解决方案"></a>更灵活的解决方案</h4><p>对父元素设置<code>display: ﬂex</code>，当父元素获得这个属性之后，就可以对其 子元素触发“伸缩盒布局模型”。 我们还需要把<code>ﬂex-ﬂow</code>设置为<code>column</code>， 否则子元素会被水平排放在一行上。</p>
<p>要把父元素的<code>min-height</code>属性指 定为<code>100vh</code>，这样它就至少会占据整个视口的高度。不过此时各个子元素的高度仍然是以各自的内容为准的（按照 CSS 规 范的说法，它们的高度仍然由内部因素来决定）。只要给<code>&lt;main&gt;</code>这个容器的<code>ﬂex</code>属性指定一个大于 0 的值（比如 1 即可），内容区块的高度应该可以自动伸展并占满所有的可用空间。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 <p id="div-border-left-yellow"><code>flex</code>属 性 实 际 上 是<code>flex-grow</code>、<code>flex-shrink</code>和<code>flex-basis</code>的 简 写 语 法。 任 何 元素只要设置了一个大于 0 的<code>flex</code>值， 就将获得可伸缩的特 性；<code>flex</code>的值负责控制多个可伸 缩元素之间的尺寸分配比例。 举例来说，在上面的这个例子中， 如 果<code>&lt;main&gt;</code>是<code>flex: 2</code>而 <code>&lt;footer&gt;</code>是<code>flex: 1</code>，那么内容 区块的高度将是页脚高度的两倍。如果把它们的值从 2 和 1 改为 4和 2 ， 结果也是一样的， 因为真 正起作用的是它们的数值比例。</p>

<h2 id="过渡与动画"><a href="#过渡与动画" class="headerlink" title="过渡与动画"></a>过渡与动画</h2><h3 id="缓动效果"><a href="#缓动效果" class="headerlink" title="缓动效果"></a>缓动效果</h3><h4 id="弹跳动画"><a href="#弹跳动画" class="headerlink" title="弹跳动画"></a>弹跳动画</h4><p>所有过渡和动画都是跟一条曲线（缓动曲线）有关的，这条曲线指定了动画过程在整段时间中是如何推进的。如果不指定调速函数， 它就会得到一个默认值。这个默认的缓动效果并不是我们想像中的匀速效果，而是如下图所示的效果：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170329149079173853634.png" alt="20170329149079173853634.png"></p>
<p>不 论 是在<code>animation / transition</code>简 写 属 性 中，还 是在<code>animation- timing-function / transition-timing-function</code>展开式属性中，<code>ease</code>都是是 默认值缓动曲线如上图。除此以外，还有四种内置的缓动曲线，你可以用它们来改变动画的推进方式：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170329149079166285017.png" alt="20170329149079166285017.png"></p>
<p><code>ease-out</code>是<code>ease-in</code>是反向版本。 这一对组合正好是实现回弹效果所需要的：每当小球的运动方向相反时，我们希望调速函数也是相反的。 因此，我们可以在<code>animation</code>属性中指定一个通用的调速函数， 然后在关键帧中按需覆盖它。我们希望下落方向上的调速函数是加速的（<code>ease- out</code>），而弹起方向上是减速的（<code>ease-in</code>）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> bounce &#123;</span><br><span class="line">    60%, 80%, <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(400px);</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: ease-out;</span><br><span class="line">    &#125;</span><br><span class="line">    70% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(300px); &#125;</span><br><span class="line">    90% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(360px); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ball</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>; <span class="attribute">height</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">background</span>: red <span class="built_in">radial-gradient</span>(at 30% 30%, #fdd, red);</span><br><span class="line">    <span class="attribute">animation</span>: bounce <span class="number">2s</span> ease-in ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有这五种曲线都是通过（三次）贝塞尔曲线来指定的。这种曲线 由一定数量的路径片断所组成，各个片断的每一端都可以由一个手柄来控制曲率（这些手柄通常也被称作控制锚点）。一条复杂的曲线可能包含很多个 片断，这些片断的端点彼此相连构成了整条曲线。</p>
<p>作为对上述五种预定义曲线的补充，CSS 提供了<code>cubic-bezier()</code>函数，允许我们指定自定义的调速函数。它接受四个参数，分别代表两个控 制锚点的坐标值， 我们通过这两个控制锚点来指定想要的贝塞尔曲线。 语法形式是这样的：<code>cubic-bezier(x1, y1, x2, y2)</code>，其中<code>( x 1 , y 1 )</code>表示第一 个控制锚点的坐标， 而<code>( x 2 , y 2 )</code>是第二个。 曲线片断的两个端点分别固定在<code>(0,0)</code>和<code>(1,1)</code>，前者是整个过渡的起点（时间进度为零，动画进度为零）， 后者是终点（时间进度为 100%，动画进度为 100%）。两个控制锚点 的 x 值都被限制在 [0, 1] 区间内（即我们无法把手柄在水平方向上移出这个图形范围）。只要把控制锚点的水平坐标和垂直坐标互换， 就可以得到任何调速函数的反向版本。</p>
<p>下面的<code>ease</code> 等 同 于<code>cubic-bezier(.25,.1,.25,1)</code>，它的反向版本就是<code>cubic- bezier(.1,.25,1,.25)</code>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> bounce &#123;</span><br><span class="line">    60%, 80%, <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(400px);</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: ease;</span><br><span class="line">    &#125;</span><br><span class="line">    70% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(300px); &#125;</span><br><span class="line">    90% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(360px); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ball</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>; <span class="attribute">height</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">background</span>: red <span class="built_in">radial-gradient</span>(at 30% 30%, #fdd, red);</span><br><span class="line">    <span class="attribute">animation</span>: bounce <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(.1,.25,1,.25) forwards;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>借助一款<a href="cubic-bezier.com">cubic-bezier.com</a>的图形化工具，可以反复调整贝塞尔曲线，从而优化动画效果。</p>
<h4 id="弹性过渡"><a href="#弹性过渡" class="headerlink" title="弹性过渡"></a>弹性过渡</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    Your username:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"leaverou"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"callout"</span>&gt;</span></span><br><span class="line">	Only letters, numbers, underscores (_) and hyphens (-) allowed!</span><br><span class="line">	<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> transform;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">1.4em</span> -.<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">---------</span>升级到弹性过渡<span class="selector-tag">---------</span></span><br><span class="line">@<span class="keyword">keyframes</span> elastic-grow &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;<span class="attribute">transform</span>: <span class="built_in">scale</span>(0)&#125;</span><br><span class="line">    70% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.1);</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(.1,.25,1,.25);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:hover)</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: elastic-grow .<span class="number">5s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的弹性过渡特效使用了动画，但是有点大材小用，还可以只用<code>cubic-bezier()</code>函数来实现。</p>
<p>曲线的控制锚点可以在垂直方向上突破 0~1 区间，从而让过渡达到低于0或高于100%的程度。它表示如果我们要从 scale(0) 的变形程度过渡到 scale(1) ，就还将经历一个比最终值更大的状 态，比如 scale(1.1) （或者更甚，这取决于调速函数有多陡）。</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170329149080006711392.png" alt="20170329149080006711392.png"></p>
<p>从上图可以看出，现在这个过渡会在总时长 50% 的时间点达到100%的变形程度。 不过， 过渡过程并不会停在那里；它会在超越最终值之后继 续推进， 在 70% 的时间点达到 110% 的变形程度峰值， 然后在最后可用的 30% 时间里过渡回它的最终值。 可见， 整个过渡的推进过程非常接近前面 的动画方案，但它只需要一行代码就可以实现整个效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> <span class="built_in">cubic-bezier</span>(.25,.1,.3,1.5);</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">1.4em</span> -.<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们把焦点从输入框中切出去的时候，所触发 的过渡会以<code>scale(1)</code>作为起始值， 并以<code>scale(0)</code>作为最终值。 由于此时 是相同的调速函数在起作用，这个过渡仍然会在 350ms 后到达110%的变形 程度。只不过在这里，110% 变形程度的解析结果并不是 <code>scale(1.1)</code>，而是<code>scale(-0.1)</code>，这样就会出现下面的效果：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170329149080091517546.gif" alt="20170329149080091517546.gif"></p>
<p>修复这个问题不过是多加一行代码而已。假设我们 只想给提示框的关闭过程指定普通的 ease 调速函数，那么可以在定义关闭 状态的 CSS 规则中把当前的调速函数覆盖掉：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">  	<span class="attribute">transition-timing-function</span>: ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> <span class="built_in">cubic-bezier</span>(.25,.1,.3,1.5);</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">1.4em</span> -.<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是此时提示框的关闭动作明显要迟钝一 些。这是因为在提示框的展开过程中，当时间 进行到 50% 时（即 250ms 之后）， 它就已经达到 100% 的完整尺寸了。 但 在收缩的过程中，从 0 到 100% 的变化会花费我们为过渡所指定的所有时间 （500ms），因此感觉上会慢一半。要修复这个问题，只需同时覆盖过渡的持续时间即可，我们既可以单独 覆盖<code>transition-duration</code>这一个属性，也可以用<code>transition</code>这个简写属 性来覆盖所有的值。如果选择后者的话，就不需要显式指定 ease 了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">  	<span class="attribute">transition</span>: .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> <span class="built_in">cubic-bezier</span>(.25,.1,.3,1.5);</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">1.4em</span> -.<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在对颜色属性的弹性过渡中，由于RGB三个通道的值是独立进行插值运算的， 因此这个过渡过程中可能会产生其他颜色，为避免不小心对颜色设置了弹性过渡， 可以尝试 把过渡的作用范围 限制在某几种特定的属性上。当我们在<code>transition</code>简写属性中不指定任何属性时，<code>transition-property</code>就会得 到它的初始值：<code>all</code>。这意味着只要是可以过渡的属性，都会参与过渡。因 此，如果我们以后在提示框打开状态的样式规则中增加一行 <code>background</code>声明，那么弹性过渡也会作用在这个属性上。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:focus)</span> + <span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(0);</span><br><span class="line">  	<span class="attribute">transition</span>: .<span class="number">25s</span> transform;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.callout</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> <span class="built_in">cubic-bezier</span>(.25,.1,.3,1.5) transform;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">1.4em</span> -.<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p id="div-border-left-yellow">可以通过<code>transition-delay</code>属 性把各个属性的过渡过程排成列队， 这个 属性的值实际上就是<code>transition</code>简写属性中的第二个时间值。 举例 来 说， 如 果<code>width</code>和<code>height</code>都需要过渡效果， 而且你希望高 度先变化然后宽度再变化， 就可以这样 写：<code>transition: .5s height, .8s .5s width;</code>（ 也 就 是 说， 让 width过渡的延时正好等于<code>height</code>过渡的持续时间）。</p>

<h3 id="逐帧动画"><a href="#逐帧动画" class="headerlink" title="逐帧动画"></a>逐帧动画</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loader"</span>&gt;</span>Loading…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> loader &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">background-position</span>: -<span class="number">800px</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loader</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">animation</span>: loader <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">999px</span>; <span class="attribute">overflow</span>: hidden; <span class="comment">/* Hide text */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(http://dabblet.com/img/loader.png) <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种通过应用各种不同的<code>background-position</code>值的方法会显示帧与帧之间的动画：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170330149083268351932.gif" alt="20170330149083268351932.gif"></p>
<p>这时候可以采用<code>steps()</code>调速函数，而不是基于贝塞尔曲线的调速函数。</p>
<p>所有基于贝塞尔曲线的调速函数都会在关键帧之间进行插值运算，从而产生平滑的过渡效果。在通常情况下，平滑的过渡是我们使用 CSS 过渡和动画的原因。 但在眼前的场景下， 这种平滑特性恰恰毁 掉了我们想实现的逐帧动画效果。    </p>
<p>与贝塞尔曲线调速函数迥然不同的是，<code>steps()</code>会根据你指定的步进数量（在这个例子中就是动画的帧数），把整个动画切分为多帧，而且整个动画会在帧与帧之间硬切，不会做任何插值处理。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loader</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">999px</span>; <span class="attribute">overflow</span>: hidden; <span class="comment">/* Hide text */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(http://dabblet.com/img/loader.png) <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">animation</span>: loader <span class="number">1s</span> infinite <span class="built_in">steps</span>(8);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>steps()</code>还接受可选的第二个参数， 其值可以是<code>start</code>或<code>end</code>（默认值）。这个参数用于指定动画在每个循环周期的什么位置发生帧的切换动作，但实际上这个参数用得并不 多。 如果我们只需要一个单步切换效果， 还可以使用<code>step-start</code>和<code>step- end</code>这样的简写属性，它们分别等同于<code>steps(1, start)</code>和<code>steps(1, end)</code>。</p>
<p id="div-border-left-yellow">对<code>steps(1, start)</code>和<code>steps(1, end)</code>的理解可以参照闪烁效果中的例子</p>

<h3 id="闪烁效果"><a href="#闪烁效果" class="headerlink" title="闪烁效果"></a>闪烁效果</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> blink-<span class="number">1</span> &#123; <span class="selector-tag">to</span> &#123; <span class="attribute">color</span>: transparent &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blink-smooth-1</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: <span class="number">1s</span> blink-<span class="number">1</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">----------</span>升级<span class="selector-tag">----------</span></span><br><span class="line">@<span class="keyword">keyframes</span> blink-<span class="number">2</span> &#123; 50% &#123; <span class="attribute">color</span>: transparent &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blink-smooth-2</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: <span class="number">1s</span> blink-<span class="number">1</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下图中，<code>.blink-smooth-1</code>对应第二个闪烁图，<code>.blink-smooth-2</code>对应第一个闪烁图。</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170330149088384939951.gif" alt="20170330149088384939951.gif"></p>
<p>通过修改关键帧，让状态切换发生在每个循环周期的中间。</p>
<p><code>animation-direction</code>的唯一作用就是反转每一个循环周期（<code>reverse</code>），或第偶数个循环周期（<code>alternate</code>），或第奇数个循环周期（<code>alternate-reverse</code>）。它的伟大之处在于，它会同时反转调整函数 ，从而产生更加逼真的动画效果。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> blink-<span class="number">2</span> &#123; <span class="selector-tag">to</span> &#123; <span class="attribute">color</span>: transparent &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blink-smooth-2</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: .<span class="number">5s</span> blink-<span class="number">1</span> <span class="number">6</span> alternate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>必须把动画循环的次数翻倍（而不是像前面的方法那样把循环周期的时间长度翻倍），因为现在一次淡入淡出的过程是由两个循环周 期组成的。基于同样的原因，我们也要把<code>animation-duration</code>减半。</p>
<p>如果用<code>steps()</code>函数来实现:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> blink &#123; <span class="selector-tag">to</span> &#123; <span class="attribute">color</span>: transparent &#125; </span><br><span class="line">  </span><br><span class="line"><span class="selector-class">.blink</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: <span class="number">1s</span> blink <span class="number">3</span> <span class="built_in">steps</span>(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时文字不会闪烁，因为<code>steps(1)</code>本质上等同于<code>steps(1, end)</code>， 它表示当前颜色与<code>transparent</code>之间的过渡会在一次步进中完成，于是颜色值的切换只会发生在动画周期的末尾。因此，我们会看到起始值贯穿于整个动画周期，而终止值只在 动画结尾的无限短的时间点处出现。如果我们改用<code>steps(1, start)</code>，结果 就完全相反了：颜色值的切换会发生在动画周期最开始，于是我们始终只能 看到纯透明的文字，没有任何动画或闪烁效果。</p>
<p>我们接下来可以换用<code>steps(2)</code>来碰碰运气，两种步进方式（<code>start</code>或<code>end</code>）都可以试一下。现在我们终于可以看到闪烁效果了， 但这个闪烁效果要么是由半透明切到纯透明，要么是由半透明切到实色，原因同上。由于我们无法通过配置<code>steps()</code>来让这个切换动作发生在动画周期 的中间点（只能发生在起点或终点），唯一的解决方案是调整动画的关键帧， 让切换动作发生在 50% 处，就像我们在本节刚开始所做的那样：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> blink-<span class="number">1</span> &#123; <span class="selector-tag">to</span> &#123; <span class="attribute">color</span>: transparent &#125; </span><br><span class="line">  </span><br><span class="line"><span class="selector-class">.blink1</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: <span class="number">1s</span> blink-<span class="number">1</span> <span class="number">3</span> <span class="built_in">steps</span>(2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">----------</span>升级<span class="selector-tag">----------</span></span><br><span class="line">@<span class="keyword">keyframes</span> blink-<span class="number">2</span> &#123; 50% &#123; <span class="attribute">color</span>: transparent &#125; </span><br><span class="line">  </span><br><span class="line"><span class="selector-class">.blink2</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: <span class="number">1s</span> blink-<span class="number">2</span> <span class="number">3</span> <span class="built_in">steps</span>(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170330149088553547628.gif" alt="20170330149088553547628.gif"></p>
<p>上图第一个对应的是<code>blink-1</code>的效果，第二个对应的是<code>blink-2</code>的效果。</p>
<h3 id="打字动画"><a href="#打字动画" class="headerlink" title="打字动画"></a>打字动画</h3><p>核心思路就是让容器的宽度成为动画的主体：把所有文本包裹在这个容 器中，然后让它的宽度从 0 开始以步进动画的方式、一个字一个字地扩张到 它应有的宽度。这个方法并不适用于多行文本。</p>
<p>动画的持续时间越长，动画效果越差：持续时间较短的动画会让界面显得更加精致。反之，动画的持续时间越长，越容易让用户感到厌烦。因此，即使这个 技巧可以用在大段文本身上，也不一定是个好主意。</p>
<p>需要用<code>white-space: nowrap;</code>来阻止文本折行，否则文本的行数会随着宽度的扩张不断变化。</p>
<p>用<code>overﬂow: hidden;</code>， 裁切超出宽度的文本。</p>
<p>用<code>steps()</code>来达到动画逐字呈现的效果，而不是平滑连贯的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>CSS is awesome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> typing &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123; <span class="attribute">width</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">200%</span> Consolas, Monaco, monospace;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">7.7em</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    overﬂow: hidden;</span><br><span class="line">    <span class="selector-tag">animation</span>: <span class="selector-tag">typing</span> 8<span class="selector-tag">s</span> <span class="selector-tag">steps</span>(15),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时的效果如下：</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149091931234149.gif" alt="20170331149091931234149.gif"></p>
<p>用<code>em</code>指定宽度显然效果不好，可以用<code>ch</code>来解决这个问题。</p>
<p><code>ch</code>表示“0” 字形的宽度，是<a href="http://w3.org/TR/css3-values" rel="external nofollow noopener noreferrer" target="_blank">CSS值与单位（第三版）</a>规范引入的一个新单位。在绝大多数场景下， 我们并不关心<code>0</code>这个字符显示出来到底有多宽。但对等宽字体来说，这是个 例外。在等宽字体中，“0”字形的宽度和其他所有字形的宽度是一样的。因 此，如果我们用 ch 单位来表达这个标题的宽度，那取值实际上就是字符的数量。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> typing &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123; <span class="attribute">width</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">200%</span> Consolas, Monaco, monospace;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">15ch</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    overﬂow: hidden;</span><br><span class="line">    <span class="selector-tag">animation</span>: <span class="selector-tag">typing</span> 8<span class="selector-tag">s</span> <span class="selector-tag">steps</span>(15),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149095804136298.gif" alt="20170331149095804136298.gif"></p>
<p>在这个例子中，可以用一个伪元素来生成光标，并通过<code>opacity</code>属性来实现闪烁效果；我们也可以用右边框来模拟 光标效果，这样就可以把有限的伪元素资源节省下来留作他用。光标的闪烁动画是需要无限循环的（即使所有的文字都显示完整之后仍然如此）， 因此需要用到 inﬁnite 关键字。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> typing &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123; <span class="attribute">width</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> caret &#123;</span><br><span class="line">    50% &#123; <span class="attribute">border-right-color</span>: transparent; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">200%</span> Consolas, Monaco, monospace;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">15ch</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border-right</span>: .<span class="number">05em</span> solid;</span><br><span class="line">    <span class="attribute">animation</span>: typing <span class="number">8s</span> <span class="built_in">steps</span>(15),</span><br><span class="line">    		   caret <span class="number">1s</span> <span class="built_in">steps</span>(1) infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于需要根据每 个标题的字数来给它们分别指定不同的宽度样式， 而且还需要在每次改变标题内容时同步更新这些宽度样式，所有可以用一段JavaScript代码来实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$$</span>(<span class="params">expr, con</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [].slice.call((con || <span class="built_in">document</span>).querySelectorAll(expr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$$(<span class="string">'h1'</span>).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">h1</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> len = h1.textContent.length, s = h1.style;</span><br><span class="line">    s.width = len + <span class="string">'ch'</span>;</span><br><span class="line">    s.animationTimingFunction = <span class="string">"steps("</span> + len + <span class="string">"),steps(1)"</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="状态平滑的动画"><a href="#状态平滑的动画" class="headerlink" title="状态平滑的动画"></a>状态平滑的动画</h3><p>让背景的<code>background-position</code>属性值从原本的<code>0 0</code>一直变化到<code>100% 0</code>时，我们就会看到这张图片从左侧一直滚动到右侧的完整过程。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> panoramic &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panoramic</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>; <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'http://c3.staticflickr.com/3/2671/3904743709_74bc76d5ac_b.jpg'</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">animation</span>: panoramic <span class="number">10s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149096383852151.gif" alt="20170331149096383852151.gif"></p>
<p>接下来实现当用户鼠标悬停时才开始播放的效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> panoramic &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panoramic</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>; <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'http://c3.staticflickr.com/3/2671/3904743709_74bc76d5ac_b.jpg'</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panoramic</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.panoramic</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: panoramic <span class="number">10s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149096496011099.gif" alt="20170331149096496011099.gif"></p>
<p>这时候当我们把鼠标移出图片时，它就会生硬地跳回最左侧。为了修复这个问题，我们需要换个角度来思考：我们在这里到底想要实 现什么样的结果。我们需要的并不是在<code>:hover</code>时应用一个动画，因为这意 味着动画被中断时的状态是无处保存的。我们需要的是当失去 :hover 状态 时暂停动画。有一个属性正好是为暂停动画的需求专门设计的：<code>animation-play-state</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> panoramic &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panoramic</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>; <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'http://c3.staticflickr.com/3/2671/3904743709_74bc76d5ac_b.jpg'</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">animation</span>: panoramic <span class="number">10s</span> linear infinite alternate;</span><br><span class="line">    <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.panoramic</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.panoramic</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149096620270366.gif" alt="20170331149096620270366.gif"></p>
<h3 id="沿环形路径平移的动画"><a href="#沿环形路径平移的动画" class="headerlink" title="沿环形路径平移的动画"></a>沿环形路径平移的动画</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"path"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://lea.verou.me/book/adamcatlace.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(1turn); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> infinite linear;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">150px</span>; <span class="comment">/*150px = 路径的半径*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码不仅让头像沿着环形路径转动，同时还会让头像自身旋转。如果有文字的话，那文字也会是颠倒的，这在可读性方面可是一个严重的问题。因此我们希望它只是沿着环形进行移动，同时保持自己本来的朝向。</p>
<h4 id="需要两个元素的解决方案"><a href="#需要两个元素的解决方案" class="headerlink" title="需要两个元素的解决方案"></a>需要两个元素的解决方案</h4><p>最主要的思路 与“平行四边形” 或者“菱形图片” 中提到的“嵌套的两层变形会相互抵 消”如出一辙：用内层的变形来抵消外层的变形效果。这时需要给图片套上额外的<code>div</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"path"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"avatar"</span> <span class="attr">src</span>=<span class="string">"http://lea.verou.me/book/adamcatlace.jpg"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后只需把头像的动画设置为相反的角度范围（ 360-0deg ） 即可：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123; </span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">transform </span>: <span class="built_in">rotate</span>(1turn); &#125; </span><br><span class="line">&#125; </span><br><span class="line">@<span class="keyword">keyframes</span> spin-reverse &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123; <span class="attribute">transform </span>: <span class="built_in">rotate</span>(1turn); &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123; </span><br><span class="line">  <span class="attribute">animation </span>: spin <span class="number">3s</span> infinite linear; </span><br><span class="line">  <span class="attribute">transform-origin </span>: <span class="number">50%</span> <span class="number">150px</span>; <span class="comment">/* 150px = 路径的半径 */</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">animation </span>: spin-reverse <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中<code>animation</code>的参数重复了两次，可以让内层动画从父元素那里继承所有的动画属性，然后把动画名覆盖掉。</p>
<p>如果只是为了反转第一套动画，就又建了一套新动画， 有点浪费。可以用在“闪烁效果”中所提到的<code>animation-direction</code>属性的<code>reverse</code>值得到原始动画的反向版本。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123; </span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">transform </span>: <span class="built_in">rotate</span>(1turn); &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123; </span><br><span class="line">  <span class="attribute">animation </span>: spin <span class="number">3s</span> infinite linear; </span><br><span class="line">  <span class="attribute">transform-origin </span>: <span class="number">50%</span> <span class="number">150px</span>; <span class="comment">/* 150px = 路径的半径 */</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">animation </span>: inherit;</span><br><span class="line">  <span class="attribute">animation-direction</span>: reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="单个元素的解决方案"><a href="#单个元素的解决方案" class="headerlink" title="单个元素的解决方案"></a>单个元素的解决方案</h4><p id="div-border-left-green"><code>transform-origin</code>只是一个语法糖而已。实际上你总是可以用<code>translate()</code>来代替它</p>

<p>每 个<code>transform-origin</code>都是可以被两个<code>translate()</code>模拟出来的。比如，下面两段代码实际上是等效的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transform</span> : <span class="selector-tag">rotate</span>(30<span class="selector-tag">deg</span>); </span><br><span class="line"><span class="selector-tag">transform-origin</span> : 200<span class="selector-tag">px</span> 300<span class="selector-tag">px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">transform</span> : <span class="selector-tag">translate</span>(200<span class="selector-tag">px</span>, 300<span class="selector-tag">px</span>) </span><br><span class="line">			<span class="selector-tag">rotate</span>(30<span class="selector-tag">deg</span>) </span><br><span class="line">			<span class="selector-tag">translate</span>(<span class="selector-tag">-200px</span>, <span class="selector-tag">-300px</span>); </span><br><span class="line"><span class="selector-tag">transform-origin</span> : 0 0;</span><br></pre></td></tr></table></figure>
<p>这是因为，变形函数并不是彼此独立的。每个变形函数并不是只对这个元素进行变形， 而且会把整个元素的坐标系统进行变形， 从而影响所有后续的变形操作。这也说明了为什么变形函数的顺序是很重要的，变形属性中不同函数的顺序如果被打乱， 可能会产生完全不同的结果。</p>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170331149097177332247.png" alt="20170331149097177332247.png"></p>
<p>借助这个思路，基于同一个<code>transform-origin</code>来实现前面用到的两个旋转动画：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">       <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 150px) </span><br><span class="line">                   <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		   <span class="built_in">translate</span>(-50%, -150px);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">         <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 150px) </span><br><span class="line">                     <span class="built_in">rotate</span>(1turn) </span><br><span class="line">         		     <span class="built_in">translate</span>(-50%, -150px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> spin-reverse &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">       <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 50%) </span><br><span class="line">                   <span class="built_in">rotate</span>(1turn) </span><br><span class="line">         		   <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">         <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 50%) </span><br><span class="line">                     <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		     <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: inherit;</span><br><span class="line">    <span class="attribute">animation-name</span>: spin-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为现在所有变形函数都是使用一个起点，可以把两套动画合成一套，这时候就不需要两层<code>div</code>来实现了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">       <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 150px) </span><br><span class="line">                   <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		   <span class="built_in">translate</span>(-50%, -150px)</span><br><span class="line">         		   <span class="built_in">translate</span>(50%, 50%) </span><br><span class="line">                   <span class="built_in">rotate</span>(1turn) </span><br><span class="line">         		   <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">         <span class="attribute">transform </span>: <span class="built_in">translate</span>(50%, 150px) </span><br><span class="line">                     <span class="built_in">rotate</span>(1turn) </span><br><span class="line">         		     <span class="built_in">translate</span>(-50%, -150px)</span><br><span class="line">           			 <span class="built_in">translate</span>(50%, 50%) </span><br><span class="line">                     <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		     translate(-50%, -50%);;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码还可以把连续的<code>translate()</code>变形操作合并起来， <code>translate(-50%, -150px)</code>和 <code>translate(50%, 50%)</code>在水平方向上的位移可以抵消，相当于我们只在 Y 轴上做了两次位移操作<code>translateY(-150px) translateY(50%)</code>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">       <span class="attribute">transform </span>: <span class="built_in">translateY</span>(150px) </span><br><span class="line">        		   <span class="built_in">translateY</span>(-50%)</span><br><span class="line">                   <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		   <span class="built_in">translateY</span>(-150px)</span><br><span class="line">         		   <span class="built_in">translateY</span>(50%) </span><br><span class="line">                   <span class="built_in">rotate</span>(1turn) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">         <span class="attribute">transform </span>: <span class="built_in">translateY</span>(150px) </span><br><span class="line">                     translateY(-50%);;</span><br><span class="line">                     <span class="selector-tag">rotate</span>(1<span class="selector-tag">turn</span>) </span><br><span class="line">         		     <span class="selector-tag">translateY</span>(<span class="selector-tag">-150px</span>)</span><br><span class="line">           			 <span class="selector-tag">translateY</span>(50%) </span><br><span class="line">                     <span class="selector-tag">rotate</span>(0<span class="selector-tag">turn</span>) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果把头像放在圆心并以此作为起点，就可以消除最开始的那两个位移操作了，而实际上这两个位移在本质上所做的就是把它放在圆心。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">       <span class="attribute">transform </span>: <span class="built_in">rotate</span>(0turn) </span><br><span class="line">         		   <span class="built_in">translateY</span>(-150px)</span><br><span class="line">         		   <span class="built_in">translateY</span>(50%) </span><br><span class="line">                   <span class="built_in">rotate</span>(1turn) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">         <span class="attribute">transform </span>: <span class="built_in">rotate</span>(1turn) </span><br><span class="line">         		     <span class="built_in">translateY</span>(-150px)</span><br><span class="line">           			 <span class="built_in">translateY</span>(50%) </span><br><span class="line">                     <span class="built_in">rotate</span>(0turn) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/assets/images/《CSS揭秘》学习笔记/20170410149183539583959.png" alt="20170410149183539583959.png"></p>
<iframe src="https://www.xmind.net/embed/5g5s" width="620px" height="540px"></iframe>
      
    </div>

    

    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/assets/20170708149950994182145.jpg" alt="tc9011 wechat" style="width: 200px; max-width: 100%">
    <div>欢迎订阅我的微信公众号</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/assets/20170313148941207221533.png" alt="tc9011 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/assets/20170313148941208922392.png" alt="tc9011 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>tc9011</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/" title="《CSS揭秘》学习笔记">https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/css/" rel="tag"># css</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/24/前端基础知识/" rel="next" title="前端基础知识">
                <i class="fa fa-chevron-left"></i> 前端基础知识
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/08/Sass入门/" rel="prev" title="Sass入门">
                Sass入门 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="external nofollow noopener noreferrer" target="_blank">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/assets/20161109360612.JPG" alt="tc9011">
            
              <p class="site-author-name" itemprop="name">tc9011</p>
              <p class="site-description motion-element" itemprop="description">释放精神的桎梏</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">78</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">50</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/tc9011" target="_blank" title="GitHub" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://instagram.com/tc9011" target="_blank" title="Instagram" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://www.zhihu.com/people/tc9011" target="_blank" title="知乎" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-globe"></i>知乎</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:tc9011@126.com" target="_blank" title="E-Mail" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#关于本书"><span class="nav-number">1.</span> <span class="nav-text">关于本书</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引言"><span class="nav-number">2.</span> <span class="nav-text">引言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Web标准：是敌还是友"><span class="nav-number">2.1.</span> <span class="nav-text">Web标准：是敌还是友</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#冰与火之歌：浏览器前缀"><span class="nav-number">2.1.1.</span> <span class="nav-text">冰与火之歌：浏览器前缀</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS编码技巧"><span class="nav-number">2.2.</span> <span class="nav-text">CSS编码技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#尽量减少代码重复"><span class="nav-number">2.2.1.</span> <span class="nav-text">尽量减少代码重复</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#currentColor"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">currentColor</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#继承"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">继承</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#相信你的眼睛，而不是数字"><span class="nav-number">2.2.2.</span> <span class="nav-text">相信你的眼睛，而不是数字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关于响应式网页设计"><span class="nav-number">2.2.3.</span> <span class="nav-text">关于响应式网页设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#合理使用简写"><span class="nav-number">2.2.4.</span> <span class="nav-text">合理使用简写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#我应该使用预处理器吗"><span class="nav-number">2.2.5.</span> <span class="nav-text">我应该使用预处理器吗</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#背景与边框"><span class="nav-number">3.</span> <span class="nav-text">背景与边框</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#半透明边框"><span class="nav-number">3.1.</span> <span class="nav-text">半透明边框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多重边框"><span class="nav-number">3.2.</span> <span class="nav-text">多重边框</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#box-shadow方案"><span class="nav-number">3.2.1.</span> <span class="nav-text">box-shadow方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#outline方案"><span class="nav-number">3.2.2.</span> <span class="nav-text">outline方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#灵活的背景定位"><span class="nav-number">3.3.</span> <span class="nav-text">灵活的背景定位</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#background-position的扩展语法方案"><span class="nav-number">3.3.1.</span> <span class="nav-text">background-position的扩展语法方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#background-origin方案"><span class="nav-number">3.3.2.</span> <span class="nav-text">background-origin方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#calc-方案"><span class="nav-number">3.3.3.</span> <span class="nav-text">calc()方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#边框内圆角"><span class="nav-number">3.4.</span> <span class="nav-text">边框内圆角</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条纹背景"><span class="nav-number">3.5.</span> <span class="nav-text">条纹背景</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#垂直条纹"><span class="nav-number">3.5.1.</span> <span class="nav-text">垂直条纹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#斜向条纹"><span class="nav-number">3.5.2.</span> <span class="nav-text">斜向条纹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更好的斜向条纹"><span class="nav-number">3.5.3.</span> <span class="nav-text">更好的斜向条纹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#灵活的同色系条纹"><span class="nav-number">3.5.4.</span> <span class="nav-text">灵活的同色系条纹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复杂的背景图案"><span class="nav-number">3.6.</span> <span class="nav-text">复杂的背景图案</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网格"><span class="nav-number">3.6.1.</span> <span class="nav-text">网格</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#波点"><span class="nav-number">3.6.2.</span> <span class="nav-text">波点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#伪随机背景"><span class="nav-number">3.7.</span> <span class="nav-text">伪随机背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连续的图像边框"><span class="nav-number">3.8.</span> <span class="nav-text">连续的图像边框</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#形状"><span class="nav-number">4.</span> <span class="nav-text">形状</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自适应椭圆"><span class="nav-number">4.1.</span> <span class="nav-text">自适应椭圆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#平行四边形"><span class="nav-number">4.2.</span> <span class="nav-text">平行四边形</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#嵌套元素方案"><span class="nav-number">4.2.1.</span> <span class="nav-text">嵌套元素方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#伪元素方案"><span class="nav-number">4.2.2.</span> <span class="nav-text">伪元素方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#菱形图片"><span class="nav-number">4.3.</span> <span class="nav-text">菱形图片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基于变形的方案"><span class="nav-number">4.3.1.</span> <span class="nav-text">基于变形的方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#裁切路径方案"><span class="nav-number">4.3.2.</span> <span class="nav-text">裁切路径方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#切角效果"><span class="nav-number">4.4.</span> <span class="nav-text">切角效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#弧形切角"><span class="nav-number">4.4.1.</span> <span class="nav-text">弧形切角</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内联SVG与border-image方案"><span class="nav-number">4.4.2.</span> <span class="nav-text">内联SVG与border-image方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#裁切路径方案-1"><span class="nav-number">4.4.3.</span> <span class="nav-text">裁切路径方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#梯形标签页"><span class="nav-number">4.5.</span> <span class="nav-text">梯形标签页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简单的饼图"><span class="nav-number">4.6.</span> <span class="nav-text">简单的饼图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基于transform的解决方案"><span class="nav-number">4.6.1.</span> <span class="nav-text">基于transform的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SVG解决方案"><span class="nav-number">4.6.2.</span> <span class="nav-text">SVG解决方案</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#视觉效果"><span class="nav-number">5.</span> <span class="nav-text">视觉效果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单侧投影"><span class="nav-number">5.1.</span> <span class="nav-text">单侧投影</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#单侧投影-1"><span class="nav-number">5.1.1.</span> <span class="nav-text">单侧投影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#邻边投影"><span class="nav-number">5.1.2.</span> <span class="nav-text">邻边投影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#双侧投影"><span class="nav-number">5.1.3.</span> <span class="nav-text">双侧投影</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不规则投影"><span class="nav-number">5.2.</span> <span class="nav-text">不规则投影</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#染色效果"><span class="nav-number">5.3.</span> <span class="nav-text">染色效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基于滤镜的方案"><span class="nav-number">5.3.1.</span> <span class="nav-text">基于滤镜的方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于混合模式的方案"><span class="nav-number">5.3.2.</span> <span class="nav-text">基于混合模式的方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#毛玻璃效果"><span class="nav-number">5.4.</span> <span class="nav-text">毛玻璃效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#折角效果"><span class="nav-number">5.5.</span> <span class="nav-text">折角效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#45°折角的解决方案"><span class="nav-number">5.5.1.</span> <span class="nav-text">45°折角的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他角度的解决方案"><span class="nav-number">5.5.2.</span> <span class="nav-text">其他角度的解决方案</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字体排印"><span class="nav-number">6.</span> <span class="nav-text">字体排印</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#连字符断行"><span class="nav-number">6.1.</span> <span class="nav-text">连字符断行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入换行"><span class="nav-number">6.2.</span> <span class="nav-text">插入换行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文本行的斑马条纹"><span class="nav-number">6.3.</span> <span class="nav-text">文本行的斑马条纹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调整tab的宽度"><span class="nav-number">6.4.</span> <span class="nav-text">调整tab的宽度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连字"><span class="nav-number">6.5.</span> <span class="nav-text">连字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#华丽的-amp-符号"><span class="nav-number">6.6.</span> <span class="nav-text">华丽的&amp;符号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义下划线"><span class="nav-number">6.7.</span> <span class="nav-text">自定义下划线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#现实中的文字效果"><span class="nav-number">6.8.</span> <span class="nav-text">现实中的文字效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#凸版印刷效果"><span class="nav-number">6.8.1.</span> <span class="nav-text">凸版印刷效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#空心字效果"><span class="nav-number">6.8.2.</span> <span class="nav-text">空心字效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文字外发光效果"><span class="nav-number">6.8.3.</span> <span class="nav-text">文字外发光效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文字凸起效果"><span class="nav-number">6.8.4.</span> <span class="nav-text">文字凸起效果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#环形文字"><span class="nav-number">6.9.</span> <span class="nav-text">环形文字</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户体验"><span class="nav-number">7.</span> <span class="nav-text">用户体验</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#选择合适的鼠标光标"><span class="nav-number">7.1.</span> <span class="nav-text">选择合适的鼠标光标</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#提示禁用状态"><span class="nav-number">7.1.1.</span> <span class="nav-text">提示禁用状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#隐藏鼠标光标"><span class="nav-number">7.1.2.</span> <span class="nav-text">隐藏鼠标光标</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#扩大可点击区域"><span class="nav-number">7.2.</span> <span class="nav-text">扩大可点击区域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义复选框"><span class="nav-number">7.3.</span> <span class="nav-text">自定义复选框</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#开关式按钮"><span class="nav-number">7.3.1.</span> <span class="nav-text">开关式按钮</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过阴影来弱化背景"><span class="nav-number">7.4.</span> <span class="nav-text">通过阴影来弱化背景</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#配合HTML实现"><span class="nav-number">7.4.1.</span> <span class="nav-text">配合HTML实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#伪元素方案-1"><span class="nav-number">7.4.2.</span> <span class="nav-text">伪元素方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#box-shadow方案-1"><span class="nav-number">7.4.3.</span> <span class="nav-text">box-shadow方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#backdrop方案"><span class="nav-number">7.4.4.</span> <span class="nav-text">backdrop方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过模糊来弱化背景"><span class="nav-number">7.5.</span> <span class="nav-text">通过模糊来弱化背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#滚动提示"><span class="nav-number">7.6.</span> <span class="nav-text">滚动提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#交互式的图片对比控件"><span class="nav-number">7.7.</span> <span class="nav-text">交互式的图片对比控件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS-resize方案"><span class="nav-number">7.7.1.</span> <span class="nav-text">CSS resize方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#范围输入控件方案"><span class="nav-number">7.7.2.</span> <span class="nav-text">范围输入控件方案</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结构与布局"><span class="nav-number">8.</span> <span class="nav-text">结构与布局</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自适应内部元素"><span class="nav-number">8.1.</span> <span class="nav-text">自适应内部元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#精确控制表格列宽"><span class="nav-number">8.2.</span> <span class="nav-text">精确控制表格列宽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#根据兄弟元素的数量来设置样式"><span class="nav-number">8.3.</span> <span class="nav-text">根据兄弟元素的数量来设置样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#根据兄弟元素的数量范围来匹配元素"><span class="nav-number">8.4.</span> <span class="nav-text">根据兄弟元素的数量范围来匹配元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#满幅的背景，定宽的内容"><span class="nav-number">8.5.</span> <span class="nav-text">满幅的背景，定宽的内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#垂直居中"><span class="nav-number">8.6.</span> <span class="nav-text">垂直居中</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基于绝对定位的解决方案"><span class="nav-number">8.6.1.</span> <span class="nav-text">基于绝对定位的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于视口单位的解决方案"><span class="nav-number">8.6.2.</span> <span class="nav-text">基于视口单位的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于Flexbox的解决方案"><span class="nav-number">8.6.3.</span> <span class="nav-text">基于Flexbox的解决方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#紧贴底部的页脚"><span class="nav-number">8.7.</span> <span class="nav-text">紧贴底部的页脚</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#固定高度的解决方案"><span class="nav-number">8.7.1.</span> <span class="nav-text">固定高度的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更灵活的解决方案"><span class="nav-number">8.7.2.</span> <span class="nav-text">更灵活的解决方案</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过渡与动画"><span class="nav-number">9.</span> <span class="nav-text">过渡与动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#缓动效果"><span class="nav-number">9.1.</span> <span class="nav-text">缓动效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#弹跳动画"><span class="nav-number">9.1.1.</span> <span class="nav-text">弹跳动画</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#弹性过渡"><span class="nav-number">9.1.2.</span> <span class="nav-text">弹性过渡</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逐帧动画"><span class="nav-number">9.2.</span> <span class="nav-text">逐帧动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闪烁效果"><span class="nav-number">9.3.</span> <span class="nav-text">闪烁效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打字动画"><span class="nav-number">9.4.</span> <span class="nav-text">打字动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#状态平滑的动画"><span class="nav-number">9.5.</span> <span class="nav-text">状态平滑的动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#沿环形路径平移的动画"><span class="nav-number">9.6.</span> <span class="nav-text">沿环形路径平移的动画</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#需要两个元素的解决方案"><span class="nav-number">9.6.1.</span> <span class="nav-text">需要两个元素的解决方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#单个元素的解决方案"><span class="nav-number">9.6.2.</span> <span class="nav-text">单个元素的解决方案</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tc9011</span>

  

  
</div>
        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>






  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59390422";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  

  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://tc9011.com/2017/04/01/《CSS揭秘》学习笔记/';
        this.page.identifier = '2017/04/01/《CSS揭秘》学习笔记/';
        this.page.title = '《CSS揭秘》学习笔记';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://tc9011.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  





	





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("bJngNJnlwjbQrKqBGbs8Ryox-gzGzoHsz", "6HjkL4ak2gcid1rbN4GOht34");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var newcounter = new Counter();
              /* Set ACL */
              var acl = new AV.ACL();
              acl.setPublicReadAccess(true);
              acl.setPublicWriteAccess(true);
              newcounter.setACL(acl);
              /* End Set ACL */
              newcounter.set("title", title);
              newcounter.set("url", url);
              newcounter.set("time", 1);
              newcounter.save(null, {
                success: function(newcounter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                },
                error: function(newcounter, error) {
                  console.log('Failed to create');
                }
              });
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


</body>
</html>